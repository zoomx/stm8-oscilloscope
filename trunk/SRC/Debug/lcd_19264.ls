   1                     ; C Compiler for STM8 (COSMIC Software)
   2                     ; Generator V4.2.8 - 03 Dec 2008
   3                     ; Optimizer V4.2.8 - 03 Dec 2008
   5                     .const:	section	.text
   6  0000               _cAscii5x8Bitmap:
   7  0000 00            	dc.b	0
   8  0001 00            	dc.b	0
   9  0002 00            	dc.b	0
  10  0003 00            	dc.b	0
  11  0004 00            	dc.b	0
  12  0005 00            	dc.b	0
  13  0006 00            	dc.b	0
  14  0007 2f            	dc.b	47
  15  0008 00            	dc.b	0
  16  0009 00            	dc.b	0
  17  000a 00            	dc.b	0
  18  000b 07            	dc.b	7
  19  000c 00            	dc.b	0
  20  000d 07            	dc.b	7
  21  000e 00            	dc.b	0
  22  000f 14            	dc.b	20
  23  0010 7f            	dc.b	127
  24  0011 14            	dc.b	20
  25  0012 7f            	dc.b	127
  26  0013 14            	dc.b	20
  27  0014 24            	dc.b	36
  28  0015 2a            	dc.b	42
  29  0016 7f            	dc.b	127
  30  0017 2a            	dc.b	42
  31  0018 12            	dc.b	18
  32  0019 62            	dc.b	98
  33  001a 64            	dc.b	100
  34  001b 08            	dc.b	8
  35  001c 13            	dc.b	19
  36  001d 23            	dc.b	35
  37  001e 36            	dc.b	54
  38  001f 49            	dc.b	73
  39  0020 55            	dc.b	85
  40  0021 22            	dc.b	34
  41  0022 50            	dc.b	80
  42  0023 00            	dc.b	0
  43  0024 05            	dc.b	5
  44  0025 03            	dc.b	3
  45  0026 00            	dc.b	0
  46  0027 00            	dc.b	0
  47  0028 00            	dc.b	0
  48  0029 1c            	dc.b	28
  49  002a 22            	dc.b	34
  50  002b 41            	dc.b	65
  51  002c 00            	dc.b	0
  52  002d 00            	dc.b	0
  53  002e 41            	dc.b	65
  54  002f 22            	dc.b	34
  55  0030 1c            	dc.b	28
  56  0031 00            	dc.b	0
  57  0032 14            	dc.b	20
  58  0033 08            	dc.b	8
  59  0034 3e            	dc.b	62
  60  0035 08            	dc.b	8
  61  0036 14            	dc.b	20
  62  0037 08            	dc.b	8
  63  0038 08            	dc.b	8
  64  0039 3e            	dc.b	62
  65  003a 08            	dc.b	8
  66  003b 08            	dc.b	8
  67  003c 00            	dc.b	0
  68  003d 00            	dc.b	0
  69  003e a0            	dc.b	160
  70  003f 60            	dc.b	96
  71  0040 00            	dc.b	0
  72  0041 08            	dc.b	8
  73  0042 08            	dc.b	8
  74  0043 08            	dc.b	8
  75  0044 08            	dc.b	8
  76  0045 08            	dc.b	8
  77  0046 00            	dc.b	0
  78  0047 60            	dc.b	96
  79  0048 60            	dc.b	96
  80  0049 00            	dc.b	0
  81  004a 00            	dc.b	0
  82  004b 20            	dc.b	32
  83  004c 10            	dc.b	16
  84  004d 08            	dc.b	8
  85  004e 04            	dc.b	4
  86  004f 02            	dc.b	2
  87  0050 3e            	dc.b	62
  88  0051 51            	dc.b	81
  89  0052 49            	dc.b	73
  90  0053 45            	dc.b	69
  91  0054 3e            	dc.b	62
  92  0055 00            	dc.b	0
  93  0056 42            	dc.b	66
  94  0057 7f            	dc.b	127
  95  0058 40            	dc.b	64
  96  0059 00            	dc.b	0
  97  005a 42            	dc.b	66
  98  005b 61            	dc.b	97
  99  005c 51            	dc.b	81
 100  005d 49            	dc.b	73
 101  005e 46            	dc.b	70
 102  005f 21            	dc.b	33
 103  0060 41            	dc.b	65
 104  0061 45            	dc.b	69
 105  0062 4b            	dc.b	75
 106  0063 31            	dc.b	49
 107  0064 18            	dc.b	24
 108  0065 14            	dc.b	20
 109  0066 12            	dc.b	18
 110  0067 7f            	dc.b	127
 111  0068 10            	dc.b	16
 112  0069 27            	dc.b	39
 113  006a 45            	dc.b	69
 114  006b 45            	dc.b	69
 115  006c 45            	dc.b	69
 116  006d 39            	dc.b	57
 117  006e 3c            	dc.b	60
 118  006f 4a            	dc.b	74
 119  0070 49            	dc.b	73
 120  0071 49            	dc.b	73
 121  0072 30            	dc.b	48
 122  0073 01            	dc.b	1
 123  0074 71            	dc.b	113
 124  0075 09            	dc.b	9
 125  0076 05            	dc.b	5
 126  0077 03            	dc.b	3
 127  0078 36            	dc.b	54
 128  0079 49            	dc.b	73
 129  007a 49            	dc.b	73
 130  007b 49            	dc.b	73
 131  007c 36            	dc.b	54
 132  007d 06            	dc.b	6
 133  007e 49            	dc.b	73
 134  007f 49            	dc.b	73
 135  0080 29            	dc.b	41
 136  0081 1e            	dc.b	30
 137  0082 00            	dc.b	0
 138  0083 36            	dc.b	54
 139  0084 36            	dc.b	54
 140  0085 00            	dc.b	0
 141  0086 00            	dc.b	0
 142  0087 00            	dc.b	0
 143  0088 56            	dc.b	86
 144  0089 36            	dc.b	54
 145  008a 00            	dc.b	0
 146  008b 00            	dc.b	0
 147  008c 08            	dc.b	8
 148  008d 14            	dc.b	20
 149  008e 22            	dc.b	34
 150  008f 41            	dc.b	65
 151  0090 00            	dc.b	0
 152  0091 14            	dc.b	20
 153  0092 14            	dc.b	20
 154  0093 14            	dc.b	20
 155  0094 14            	dc.b	20
 156  0095 14            	dc.b	20
 157  0096 00            	dc.b	0
 158  0097 41            	dc.b	65
 159  0098 22            	dc.b	34
 160  0099 14            	dc.b	20
 161  009a 08            	dc.b	8
 162  009b 02            	dc.b	2
 163  009c 01            	dc.b	1
 164  009d 51            	dc.b	81
 165  009e 09            	dc.b	9
 166  009f 06            	dc.b	6
 167  00a0 32            	dc.b	50
 168  00a1 49            	dc.b	73
 169  00a2 59            	dc.b	89
 170  00a3 51            	dc.b	81
 171  00a4 3e            	dc.b	62
 172  00a5 7c            	dc.b	124
 173  00a6 12            	dc.b	18
 174  00a7 11            	dc.b	17
 175  00a8 12            	dc.b	18
 176  00a9 7c            	dc.b	124
 177  00aa 7f            	dc.b	127
 178  00ab 49            	dc.b	73
 179  00ac 49            	dc.b	73
 180  00ad 49            	dc.b	73
 181  00ae 36            	dc.b	54
 182  00af 3e            	dc.b	62
 183  00b0 41            	dc.b	65
 184  00b1 41            	dc.b	65
 185  00b2 41            	dc.b	65
 186  00b3 22            	dc.b	34
 187  00b4 7f            	dc.b	127
 188  00b5 41            	dc.b	65
 189  00b6 41            	dc.b	65
 190  00b7 22            	dc.b	34
 191  00b8 1c            	dc.b	28
 192  00b9 7f            	dc.b	127
 193  00ba 49            	dc.b	73
 194  00bb 49            	dc.b	73
 195  00bc 49            	dc.b	73
 196  00bd 41            	dc.b	65
 197  00be 7f            	dc.b	127
 198  00bf 09            	dc.b	9
 199  00c0 09            	dc.b	9
 200  00c1 09            	dc.b	9
 201  00c2 01            	dc.b	1
 202  00c3 3e            	dc.b	62
 203  00c4 41            	dc.b	65
 204  00c5 49            	dc.b	73
 205  00c6 49            	dc.b	73
 206  00c7 7a            	dc.b	122
 207  00c8 7f            	dc.b	127
 208  00c9 08            	dc.b	8
 209  00ca 08            	dc.b	8
 210  00cb 08            	dc.b	8
 211  00cc 7f            	dc.b	127
 212  00cd 00            	dc.b	0
 213  00ce 41            	dc.b	65
 214  00cf 7f            	dc.b	127
 215  00d0 41            	dc.b	65
 216  00d1 00            	dc.b	0
 217  00d2 20            	dc.b	32
 218  00d3 40            	dc.b	64
 219  00d4 41            	dc.b	65
 220  00d5 3f            	dc.b	63
 221  00d6 01            	dc.b	1
 222  00d7 7f            	dc.b	127
 223  00d8 08            	dc.b	8
 224  00d9 14            	dc.b	20
 225  00da 22            	dc.b	34
 226  00db 41            	dc.b	65
 227  00dc 7f            	dc.b	127
 228  00dd 40            	dc.b	64
 229  00de 40            	dc.b	64
 230  00df 40            	dc.b	64
 231  00e0 40            	dc.b	64
 232  00e1 7f            	dc.b	127
 233  00e2 02            	dc.b	2
 234  00e3 0c            	dc.b	12
 235  00e4 02            	dc.b	2
 236  00e5 7f            	dc.b	127
 237  00e6 7f            	dc.b	127
 238  00e7 04            	dc.b	4
 239  00e8 08            	dc.b	8
 240  00e9 10            	dc.b	16
 241  00ea 7f            	dc.b	127
 242  00eb 3e            	dc.b	62
 243  00ec 41            	dc.b	65
 244  00ed 41            	dc.b	65
 245  00ee 41            	dc.b	65
 246  00ef 3e            	dc.b	62
 247  00f0 7f            	dc.b	127
 248  00f1 09            	dc.b	9
 249  00f2 09            	dc.b	9
 250  00f3 09            	dc.b	9
 251  00f4 06            	dc.b	6
 252  00f5 3e            	dc.b	62
 253  00f6 41            	dc.b	65
 254  00f7 51            	dc.b	81
 255  00f8 21            	dc.b	33
 256  00f9 5e            	dc.b	94
 257  00fa 7f            	dc.b	127
 258  00fb 09            	dc.b	9
 259  00fc 19            	dc.b	25
 260  00fd 29            	dc.b	41
 261  00fe 46            	dc.b	70
 262  00ff 46            	dc.b	70
 263  0100 49            	dc.b	73
 264  0101 49            	dc.b	73
 265  0102 49            	dc.b	73
 266  0103 31            	dc.b	49
 267  0104 01            	dc.b	1
 268  0105 01            	dc.b	1
 269  0106 7f            	dc.b	127
 270  0107 01            	dc.b	1
 271  0108 01            	dc.b	1
 272  0109 3f            	dc.b	63
 273  010a 40            	dc.b	64
 274  010b 40            	dc.b	64
 275  010c 40            	dc.b	64
 276  010d 3f            	dc.b	63
 277  010e 1f            	dc.b	31
 278  010f 20            	dc.b	32
 279  0110 40            	dc.b	64
 280  0111 20            	dc.b	32
 281  0112 1f            	dc.b	31
 282  0113 3f            	dc.b	63
 283  0114 40            	dc.b	64
 284  0115 38            	dc.b	56
 285  0116 40            	dc.b	64
 286  0117 3f            	dc.b	63
 287  0118 63            	dc.b	99
 288  0119 14            	dc.b	20
 289  011a 08            	dc.b	8
 290  011b 14            	dc.b	20
 291  011c 63            	dc.b	99
 292  011d 07            	dc.b	7
 293  011e 08            	dc.b	8
 294  011f 70            	dc.b	112
 295  0120 08            	dc.b	8
 296  0121 07            	dc.b	7
 297  0122 61            	dc.b	97
 298  0123 51            	dc.b	81
 299  0124 49            	dc.b	73
 300  0125 45            	dc.b	69
 301  0126 43            	dc.b	67
 302  0127 00            	dc.b	0
 303  0128 7f            	dc.b	127
 304  0129 41            	dc.b	65
 305  012a 41            	dc.b	65
 306  012b 00            	dc.b	0
 307  012c 55            	dc.b	85
 308  012d 2a            	dc.b	42
 309  012e 55            	dc.b	85
 310  012f 2a            	dc.b	42
 311  0130 55            	dc.b	85
 312  0131 00            	dc.b	0
 313  0132 41            	dc.b	65
 314  0133 41            	dc.b	65
 315  0134 7f            	dc.b	127
 316  0135 00            	dc.b	0
 317  0136 04            	dc.b	4
 318  0137 02            	dc.b	2
 319  0138 01            	dc.b	1
 320  0139 02            	dc.b	2
 321  013a 04            	dc.b	4
 322  013b 40            	dc.b	64
 323  013c 40            	dc.b	64
 324  013d 40            	dc.b	64
 325  013e 40            	dc.b	64
 326  013f 40            	dc.b	64
 327  0140 00            	dc.b	0
 328  0141 01            	dc.b	1
 329  0142 02            	dc.b	2
 330  0143 04            	dc.b	4
 331  0144 00            	dc.b	0
 332  0145 20            	dc.b	32
 333  0146 54            	dc.b	84
 334  0147 54            	dc.b	84
 335  0148 54            	dc.b	84
 336  0149 78            	dc.b	120
 337  014a 7f            	dc.b	127
 338  014b 48            	dc.b	72
 339  014c 44            	dc.b	68
 340  014d 44            	dc.b	68
 341  014e 38            	dc.b	56
 342  014f 38            	dc.b	56
 343  0150 44            	dc.b	68
 344  0151 44            	dc.b	68
 345  0152 44            	dc.b	68
 346  0153 20            	dc.b	32
 347  0154 38            	dc.b	56
 348  0155 44            	dc.b	68
 349  0156 44            	dc.b	68
 350  0157 48            	dc.b	72
 351  0158 7f            	dc.b	127
 352  0159 38            	dc.b	56
 353  015a 54            	dc.b	84
 354  015b 54            	dc.b	84
 355  015c 54            	dc.b	84
 356  015d 18            	dc.b	24
 357  015e 08            	dc.b	8
 358  015f 7e            	dc.b	126
 359  0160 09            	dc.b	9
 360  0161 01            	dc.b	1
 361  0162 02            	dc.b	2
 362  0163 18            	dc.b	24
 363  0164 a4            	dc.b	164
 364  0165 a4            	dc.b	164
 365  0166 a4            	dc.b	164
 366  0167 7c            	dc.b	124
 367  0168 7f            	dc.b	127
 368  0169 08            	dc.b	8
 369  016a 04            	dc.b	4
 370  016b 04            	dc.b	4
 371  016c 78            	dc.b	120
 372  016d 00            	dc.b	0
 373  016e 44            	dc.b	68
 374  016f 7d            	dc.b	125
 375  0170 40            	dc.b	64
 376  0171 00            	dc.b	0
 377  0172 40            	dc.b	64
 378  0173 80            	dc.b	128
 379  0174 84            	dc.b	132
 380  0175 7d            	dc.b	125
 381  0176 00            	dc.b	0
 382  0177 7f            	dc.b	127
 383  0178 10            	dc.b	16
 384  0179 28            	dc.b	40
 385  017a 44            	dc.b	68
 386  017b 00            	dc.b	0
 387  017c 00            	dc.b	0
 388  017d 41            	dc.b	65
 389  017e 7f            	dc.b	127
 390  017f 40            	dc.b	64
 391  0180 00            	dc.b	0
 392  0181 7c            	dc.b	124
 393  0182 04            	dc.b	4
 394  0183 18            	dc.b	24
 395  0184 04            	dc.b	4
 396  0185 78            	dc.b	120
 397  0186 7c            	dc.b	124
 398  0187 08            	dc.b	8
 399  0188 04            	dc.b	4
 400  0189 04            	dc.b	4
 401  018a 78            	dc.b	120
 402  018b 38            	dc.b	56
 403  018c 44            	dc.b	68
 404  018d 44            	dc.b	68
 405  018e 44            	dc.b	68
 406  018f 38            	dc.b	56
 407  0190 fc            	dc.b	252
 408  0191 24            	dc.b	36
 409  0192 24            	dc.b	36
 410  0193 24            	dc.b	36
 411  0194 18            	dc.b	24
 412  0195 18            	dc.b	24
 413  0196 24            	dc.b	36
 414  0197 24            	dc.b	36
 415  0198 18            	dc.b	24
 416  0199 fc            	dc.b	252
 417  019a 7c            	dc.b	124
 418  019b 08            	dc.b	8
 419  019c 04            	dc.b	4
 420  019d 04            	dc.b	4
 421  019e 08            	dc.b	8
 422  019f 48            	dc.b	72
 423  01a0 54            	dc.b	84
 424  01a1 54            	dc.b	84
 425  01a2 54            	dc.b	84
 426  01a3 20            	dc.b	32
 427  01a4 04            	dc.b	4
 428  01a5 3f            	dc.b	63
 429  01a6 44            	dc.b	68
 430  01a7 40            	dc.b	64
 431  01a8 20            	dc.b	32
 432  01a9 3c            	dc.b	60
 433  01aa 40            	dc.b	64
 434  01ab 40            	dc.b	64
 435  01ac 20            	dc.b	32
 436  01ad 7c            	dc.b	124
 437  01ae 1c            	dc.b	28
 438  01af 20            	dc.b	32
 439  01b0 40            	dc.b	64
 440  01b1 20            	dc.b	32
 441  01b2 1c            	dc.b	28
 442  01b3 3c            	dc.b	60
 443  01b4 40            	dc.b	64
 444  01b5 30            	dc.b	48
 445  01b6 40            	dc.b	64
 446  01b7 3c            	dc.b	60
 447  01b8 44            	dc.b	68
 448  01b9 28            	dc.b	40
 449  01ba 10            	dc.b	16
 450  01bb 28            	dc.b	40
 451  01bc 44            	dc.b	68
 452  01bd 1c            	dc.b	28
 453  01be a0            	dc.b	160
 454  01bf a0            	dc.b	160
 455  01c0 a0            	dc.b	160
 456  01c1 7c            	dc.b	124
 457  01c2 44            	dc.b	68
 458  01c3 64            	dc.b	100
 459  01c4 54            	dc.b	84
 460  01c5 4c            	dc.b	76
 461  01c6 44            	dc.b	68
 462  01c7 00            	dc.b	0
 463  01c8 08            	dc.b	8
 464  01c9 36            	dc.b	54
 465  01ca 41            	dc.b	65
 466  01cb 00            	dc.b	0
 467  01cc 00            	dc.b	0
 468  01cd 00            	dc.b	0
 469  01ce 7f            	dc.b	127
 470  01cf 00            	dc.b	0
 471  01d0 00            	dc.b	0
 472  01d1 00            	dc.b	0
 473  01d2 41            	dc.b	65
 474  01d3 36            	dc.b	54
 475  01d4 08            	dc.b	8
 476  01d5 00            	dc.b	0
 477  01d6 08            	dc.b	8
 478  01d7 10            	dc.b	16
 479  01d8 08            	dc.b	8
 480  01d9 04            	dc.b	4
 481  01da 08            	dc.b	8
 571                     ; 10 void LCD_WriteCommand(u8 cmd, u8 ChipSel)
 571                     ; 11 {
 573                     	switch	.text
 574  0000               _LCD_WriteCommand:
 576  0000 89            	pushw	x
 577  0001 88            	push	a
 578       00000001      OFST:	set	1
 581                     ; 12     disableInterrupts();
 584  0002 9b            	sim	
 586                     ; 13     LCD_RW_L();
 589  0003 7215500a      	bres	20490,#2
 590                     ; 14     LCD_RS_L(); // Command Signal
 592                     ; 15     LCD_SET_CS_SIGNAL(ChipSel);
 594  0007 9f            	ld	a,xl
 595  0008 7217500a      	bres	20490,#3
 596  000c c75014        	ld	20500,a
 597                     ; 17     LCD_E_H();
 599  000f 7212500a      	bset	20490,#1
 600                     ; 18 	LCD_SET_DATA(cmd);
 602  0013 7b02          	ld	a,(OFST+1,sp)
 603  0015 c75005        	ld	20485,a
 604                     ; 20     DELAY_US(100);
 606  0018 a664          	ld	a,#100
 607  001a 6b01          	ld	(OFST+0,sp),a
 609  001c 2003          	jra	L37
 610  001e               L76:
 614  001e 9d            	nop	
 616  001f 7b01          	ld	a,(OFST+0,sp)
 617  0021               L37:
 620  0021 0a01          	dec	(OFST+0,sp)
 621  0023 4d            	tnz	a
 622  0024 26f8          	jrne	L76
 623                     ; 22 	LCD_E_L();
 625  0026 7213500a      	bres	20490,#1
 626                     ; 23     enableInterrupts();
 629  002a 9a            	rim	
 631                     ; 25 }
 635  002b 5b03          	addw	sp,#3
 636  002d 81            	ret	
 691                     ; 27 void LCD_WriteData(u8 Data, u8 ChipSel)
 691                     ; 28 {
 692                     	switch	.text
 693  002e               _LCD_WriteData:
 695  002e 89            	pushw	x
 696  002f 88            	push	a
 697       00000001      OFST:	set	1
 700                     ; 29     disableInterrupts();
 703  0030 9b            	sim	
 705                     ; 31 	LCD_RW_L();
 708  0031 7215500a      	bres	20490,#2
 709                     ; 32     LCD_RS_H(); // Data Signal
 711                     ; 33     LCD_SET_CS_SIGNAL(ChipSel);
 713  0035 9f            	ld	a,xl
 714  0036 7216500a      	bset	20490,#3
 715  003a c75014        	ld	20500,a
 716                     ; 35     LCD_E_H();
 718  003d 7212500a      	bset	20490,#1
 719                     ; 37 	LCD_SET_DATA(Data);
 721  0041 7b02          	ld	a,(OFST+1,sp)
 722  0043 c75005        	ld	20485,a
 723                     ; 39     DELAY_US(5);
 725  0046 a605          	ld	a,#5
 726  0048 6b01          	ld	(OFST+0,sp),a
 728  004a 2003          	jra	L141
 729  004c               L531:
 733  004c 9d            	nop	
 735  004d 7b01          	ld	a,(OFST+0,sp)
 736  004f               L141:
 739  004f 0a01          	dec	(OFST+0,sp)
 740  0051 4d            	tnz	a
 741  0052 26f8          	jrne	L531
 742                     ; 41 	LCD_E_L();
 744  0054 7213500a      	bres	20490,#1
 745                     ; 42     enableInterrupts();
 748  0058 9a            	rim	
 750                     ; 43 }
 754  0059 5b03          	addw	sp,#3
 755  005b 81            	ret	
 790                     ; 45 u8 LCD_ReadData(void)
 790                     ; 46 {
 791                     	switch	.text
 792  005c               _LCD_ReadData:
 794       00000001      OFST:	set	1
 797                     ; 49 	LCD_E_L();
 799  005c 7213500a      	bres	20490,#1
 800                     ; 50 	LCD_RW_H();
 802  0060 7214500a      	bset	20490,#2
 803                     ; 52     LCD_CSA_L();
 805  0064 721d5014      	bres	20500,#6
 806                     ; 53     LCD_CSB_L();
 808  0068 721f5014      	bres	20500,#7
 809                     ; 55 	LCD_RS_H();
 811  006c 7216500a      	bset	20490,#3
 812  0070 88            	push	a
 813                     ; 57 	LCD_E_H();
 815  0071 7212500a      	bset	20490,#1
 816                     ; 58 	delay_us(1);
 818  0075 a601          	ld	a,#1
 819  0077 cd0000        	call	_delay_us
 821                     ; 60 	LCD_DATA_INPUT_MODE();
 823  007a 4f            	clr	a
 824  007b c75007        	ld	20487,a
 827  007e c75008        	ld	20488,a
 830  0081 c75009        	ld	20489,a
 831                     ; 61 	rData = LCD_READ_DATA();
 833  0084 c65006        	ld	a,20486
 834  0087 6b01          	ld	(OFST+0,sp),a
 835                     ; 62 	LCD_DATA_OUTPUT_MODE();
 837  0089 c65007        	ld	a,20487
 838  008c aaff          	or	a,#255
 839  008e c75007        	ld	20487,a
 842  0091 c65008        	ld	a,20488
 843  0094 aaff          	or	a,#255
 844  0096 c75008        	ld	20488,a
 847  0099 c65009        	ld	a,20489
 848  009c aaff          	or	a,#255
 849  009e c75009        	ld	20489,a
 850                     ; 64 	LCD_RW_L();
 852  00a1 7215500a      	bres	20490,#2
 853                     ; 65 	LCD_E_H();
 855  00a5 7212500a      	bset	20490,#1
 856                     ; 66 	LCD_CSA_H();
 858  00a9 721c5014      	bset	20500,#6
 859                     ; 67 	LCD_CSB_H();
 861  00ad 721e5014      	bset	20500,#7
 862                     ; 69 	return rData;
 864  00b1 7b01          	ld	a,(OFST+0,sp)
 867  00b3 5b01          	addw	sp,#1
 868  00b5 81            	ret	
 903                     ; 73 u8 LCD_ReadCommand(void)
 903                     ; 74 {
 904                     	switch	.text
 905  00b6               _LCD_ReadCommand:
 907       00000001      OFST:	set	1
 910                     ; 77 	LCD_E_L();
 912  00b6 7213500a      	bres	20490,#1
 913                     ; 78 	LCD_RW_H();
 915  00ba 7214500a      	bset	20490,#2
 916                     ; 80 	LCD_CSA_L();
 918  00be 721d5014      	bres	20500,#6
 919                     ; 81 	LCD_CSB_L();
 921  00c2 721f5014      	bres	20500,#7
 922                     ; 83 	LCD_RS_L();
 924  00c6 7217500a      	bres	20490,#3
 925  00ca 88            	push	a
 926                     ; 85 	LCD_E_H();
 928  00cb 7212500a      	bset	20490,#1
 929                     ; 86 	delay_us(1);
 931  00cf a601          	ld	a,#1
 932  00d1 cd0000        	call	_delay_us
 934                     ; 88 	LCD_DATA_INPUT_MODE();
 936  00d4 4f            	clr	a
 937  00d5 c75007        	ld	20487,a
 940  00d8 c75008        	ld	20488,a
 943  00db c75009        	ld	20489,a
 944                     ; 89 	rData = LCD_READ_DATA();
 946  00de c65006        	ld	a,20486
 947  00e1 6b01          	ld	(OFST+0,sp),a
 948                     ; 90 	LCD_DATA_OUTPUT_MODE();
 950  00e3 c65007        	ld	a,20487
 951  00e6 aaff          	or	a,#255
 952  00e8 c75007        	ld	20487,a
 955  00eb c65008        	ld	a,20488
 956  00ee aaff          	or	a,#255
 957  00f0 c75008        	ld	20488,a
 960  00f3 c65009        	ld	a,20489
 961  00f6 aaff          	or	a,#255
 962  00f8 c75009        	ld	20489,a
 963                     ; 92 	LCD_RW_L();
 965  00fb 7215500a      	bres	20490,#2
 966                     ; 93 	LCD_E_H();
 968  00ff 7212500a      	bset	20490,#1
 969                     ; 94 	LCD_CSA_H();
 971  0103 721c5014      	bset	20500,#6
 972                     ; 95 	LCD_CSB_H();
 974  0107 721e5014      	bset	20500,#7
 975                     ; 97 	return rData;
 977  010b 7b01          	ld	a,(OFST+0,sp)
 980  010d 5b01          	addw	sp,#1
 981  010f 81            	ret	
1005                     ; 101 void LCD_Init(void)
1005                     ; 102 {
1006                     	switch	.text
1007  0110               _LCD_Init:
1011                     ; 104     LCD_DATA_OUTPUT_MODE();
1013  0110 c65007        	ld	a,20487
1014  0113 aaff          	or	a,#255
1015  0115 c75007        	ld	20487,a
1018  0118 c65008        	ld	a,20488
1019  011b aaff          	or	a,#255
1020  011d c75008        	ld	20488,a
1023  0120 c65009        	ld	a,20489
1024  0123 aaff          	or	a,#255
1025  0125 c75009        	ld	20489,a
1026                     ; 105     LCD_CONTROL_OUTPUT_MODE();
1028  0128 c6500c        	ld	a,20492
1029  012b aa0e          	or	a,#14
1030  012d c7500c        	ld	20492,a
1033  0130 c6500d        	ld	a,20493
1034  0133 aa0e          	or	a,#14
1035  0135 c7500d        	ld	20493,a
1038  0138 c6500e        	ld	a,20494
1039  013b aa0e          	or	a,#14
1040  013d c7500e        	ld	20494,a
1041                     ; 106     LCD_CS_OUTPUT_MODE();
1043  0140 c65016        	ld	a,20502
1044  0143 aac0          	or	a,#192
1045  0145 c75016        	ld	20502,a
1048  0148 c65017        	ld	a,20503
1049  014b aac0          	or	a,#192
1050  014d c75017        	ld	20503,a
1053  0150 c65018        	ld	a,20504
1054  0153 aac0          	or	a,#192
1055  0155 c75018        	ld	20504,a
1056                     ; 107     LCD_RES_OUTPUT_MODE();
1058  0158 7218500c      	bset	20492,#4
1061  015c 7218500d      	bset	20493,#4
1064  0160 7218500e      	bset	20494,#4
1065                     ; 108 		LCD_BL_OUTPUT_MODE();
1067  0164 7218501b      	bset	20507,#4
1070  0168 7218501c      	bset	20508,#4
1073  016c 7218501d      	bset	20509,#4
1074                     ; 109     LCD_RES_H();
1076  0170 7218500a      	bset	20490,#4
1077                     ; 110 		LCD_BL_H();
1079                     ; 112     LCD_WriteCommand(LCD_DISPLAY_ON, LCD_LEFT);
1081  0174 5f            	clrw	x
1082  0175 72185019      	bset	20505,#4
1083  0179 a63f          	ld	a,#63
1084  017b 95            	ld	xh,a
1085  017c cd0000        	call	_LCD_WriteCommand
1087                     ; 113     LCD_WriteCommand(LCD_DISPLAY_ON, LCD_MID);
1089  017f ae0001        	ldw	x,#1
1090  0182 a63f          	ld	a,#63
1091  0184 95            	ld	xh,a
1092  0185 cd0000        	call	_LCD_WriteCommand
1094                     ; 114     LCD_WriteCommand(LCD_DISPLAY_ON, LCD_RIGHT);
1096  0188 ae0002        	ldw	x,#2
1097  018b a63f          	ld	a,#63
1098  018d 95            	ld	xh,a
1099  018e cd0000        	call	_LCD_WriteCommand
1101                     ; 115     LCD_WriteCommand(LCD_START_LINE+0, LCD_LEFT);
1103  0191 5f            	clrw	x
1104  0192 a6c0          	ld	a,#192
1105  0194 95            	ld	xh,a
1107                     ; 117 }
1110  0195 cc0000        	jp	_LCD_WriteCommand
1220                     ; 119 void LCD_BufferDrawPixel(u8 x, u8 y, DrawMode mode)
1220                     ; 120 {
1221                     	switch	.text
1222  0198               _LCD_BufferDrawPixel:
1224  0198 89            	pushw	x
1225  0199 5203          	subw	sp,#3
1226       00000003      OFST:	set	3
1229                     ; 121 	char DX = (y >> 3);                 // 计算出属于哪个字节 
1231  019b 9f            	ld	a,xl
1232  019c 44            	srl	a
1233  019d 44            	srl	a
1234  019e 44            	srl	a
1235  019f 6b02          	ld	(OFST-1,sp),a
1236                     ; 122 	char BX = (y & 0x07);               // 计算出属于字节哪一位 
1238  01a1 7b05          	ld	a,(OFST+2,sp)
1239  01a3 a407          	and	a,#7
1240  01a5 6b03          	ld	(OFST+0,sp),a
1241                     ; 123     u8 temp = (1<<BX);
1243  01a7 5f            	clrw	x
1244  01a8 97            	ld	xl,a
1245  01a9 a601          	ld	a,#1
1246  01ab 5d            	tnzw	x
1247  01ac 2704          	jreq	L43
1248  01ae               L63:
1249  01ae 48            	sll	a
1250  01af 5a            	decw	x
1251  01b0 26fc          	jrne	L63
1252  01b2               L43:
1253  01b2 6b01          	ld	(OFST-2,sp),a
1254                     ; 125 	switch(mode){
1256  01b4 7b08          	ld	a,(OFST+5,sp)
1258                     ; 135 		default:
1258                     ; 136 			break;
1259  01b6 2708          	jreq	L552
1260  01b8 4a            	dec	a
1261  01b9 2729          	jreq	L752
1262  01bb 4a            	dec	a
1263  01bc 2749          	jreq	L162
1264  01be 206b          	jra	L343
1265  01c0               L552:
1266                     ; 126 		case LCD_CLEAR:
1266                     ; 127 			DisplayBuffer[DX][x] &= ~(1<<BX);
1268  01c0 7b02          	ld	a,(OFST-1,sp)
1269  01c2 97            	ld	xl,a
1270  01c3 a6c0          	ld	a,#192
1271  01c5 42            	mul	x,a
1272  01c6 01            	rrwa	x,a
1273  01c7 1b04          	add	a,(OFST+1,sp)
1274  01c9 2401          	jrnc	L04
1275  01cb 5c            	incw	x
1276  01cc               L04:
1277  01cc 02            	rlwa	x,a
1278  01cd 7b03          	ld	a,(OFST+0,sp)
1279  01cf 905f          	clrw	y
1280  01d1 9097          	ld	yl,a
1281  01d3 a601          	ld	a,#1
1282  01d5 905d          	tnzw	y
1283  01d7 2705          	jreq	L24
1284  01d9               L44:
1285  01d9 48            	sll	a
1286  01da 905a          	decw	y
1287  01dc 26fb          	jrne	L44
1288  01de               L24:
1289  01de 43            	cpl	a
1290  01df d40000        	and	a,(L12_DisplayBuffer,x)
1291                     ; 128 			break;
1293  01e2 2044          	jp	LC001
1294  01e4               L752:
1295                     ; 129 		case LCD_NOT:
1295                     ; 130 			DisplayBuffer[DX][x] ^= (1<<BX);
1297  01e4 7b02          	ld	a,(OFST-1,sp)
1298  01e6 97            	ld	xl,a
1299  01e7 a6c0          	ld	a,#192
1300  01e9 42            	mul	x,a
1301  01ea 01            	rrwa	x,a
1302  01eb 1b04          	add	a,(OFST+1,sp)
1303  01ed 2401          	jrnc	L64
1304  01ef 5c            	incw	x
1305  01f0               L64:
1306  01f0 02            	rlwa	x,a
1307  01f1 7b03          	ld	a,(OFST+0,sp)
1308  01f3 905f          	clrw	y
1309  01f5 9097          	ld	yl,a
1310  01f7 a601          	ld	a,#1
1311  01f9 905d          	tnzw	y
1312  01fb 2705          	jreq	L05
1313  01fd               L25:
1314  01fd 48            	sll	a
1315  01fe 905a          	decw	y
1316  0200 26fb          	jrne	L25
1317  0202               L05:
1318  0202 d80000        	xor	a,(L12_DisplayBuffer,x)
1319                     ; 131 			break;
1321  0205 2021          	jp	LC001
1322  0207               L162:
1323                     ; 132 		case LCD_SET:
1323                     ; 133 			DisplayBuffer[DX][x] |= (1<<BX);
1325  0207 7b02          	ld	a,(OFST-1,sp)
1326  0209 97            	ld	xl,a
1327  020a a6c0          	ld	a,#192
1328  020c 42            	mul	x,a
1329  020d 01            	rrwa	x,a
1330  020e 1b04          	add	a,(OFST+1,sp)
1331  0210 2401          	jrnc	L45
1332  0212 5c            	incw	x
1333  0213               L45:
1334  0213 02            	rlwa	x,a
1335  0214 7b03          	ld	a,(OFST+0,sp)
1336  0216 905f          	clrw	y
1337  0218 9097          	ld	yl,a
1338  021a a601          	ld	a,#1
1339  021c 905d          	tnzw	y
1340  021e 2705          	jreq	L65
1341  0220               L06:
1342  0220 48            	sll	a
1343  0221 905a          	decw	y
1344  0223 26fb          	jrne	L06
1345  0225               L65:
1346  0225 da0000        	or	a,(L12_DisplayBuffer,x)
1347  0228               LC001:
1348  0228 d70000        	ld	(L12_DisplayBuffer,x),a
1349                     ; 134 			break;
1351                     ; 135 		default:
1351                     ; 136 			break;
1353  022b               L343:
1354                     ; 138     dirty = 1;
1356  022b 35010000      	mov	L71_dirty,#1
1357                     ; 152 }
1360  022f 5b05          	addw	sp,#5
1361  0231 81            	ret	
1470                     ; 155 static void LCD_BufferDrawXLine(u8 x, u8 y, u8 len, DrawMode mode)
1470                     ; 156 {
1471                     	switch	.text
1472  0232               L543_LCD_BufferDrawXLine:
1474  0232 89            	pushw	x
1475  0233 5204          	subw	sp,#4
1476       00000004      OFST:	set	4
1479                     ; 157 	u8 DX = (y >> 3);
1481  0235 9f            	ld	a,xl
1482  0236 44            	srl	a
1483  0237 44            	srl	a
1484  0238 44            	srl	a
1485  0239 6b04          	ld	(OFST+0,sp),a
1486                     ; 158 	u8 BX = (y & 0x07);
1488  023b 7b06          	ld	a,(OFST+2,sp)
1489  023d a407          	and	a,#7
1490  023f 6b01          	ld	(OFST-3,sp),a
1491                     ; 159 	u8 mask = (1 << BX);
1493  0241 5f            	clrw	x
1494  0242 97            	ld	xl,a
1495  0243 a601          	ld	a,#1
1496  0245 5d            	tnzw	x
1497  0246 2704          	jreq	L46
1498  0248               L66:
1499  0248 48            	sll	a
1500  0249 5a            	decw	x
1501  024a 26fc          	jrne	L66
1502  024c               L46:
1503  024c 6b02          	ld	(OFST-2,sp),a
1504                     ; 160 	u8 nmask = ~mask;
1506  024e 43            	cpl	a
1507  024f 6b01          	ld	(OFST-3,sp),a
1508                     ; 162 	for( i = 0; i < len; ++i,++x)
1510  0251 0f03          	clr	(OFST-1,sp)
1512  0253 204d          	jra	L144
1513  0255               L534:
1514                     ; 163 		switch(mode){
1516  0255 7b0a          	ld	a,(OFST+6,sp)
1518                     ; 173 		default:
1518                     ; 174 			break;
1519  0257 2708          	jreq	L743
1520  0259 4a            	dec	a
1521  025a 2719          	jreq	L153
1522  025c 4a            	dec	a
1523  025d 272a          	jreq	L353
1524  025f 203d          	jra	L744
1525  0261               L743:
1526                     ; 164 		case LCD_CLEAR:
1526                     ; 165 			DisplayBuffer[DX][x] &= nmask;
1528  0261 7b04          	ld	a,(OFST+0,sp)
1529  0263 97            	ld	xl,a
1530  0264 a6c0          	ld	a,#192
1531  0266 42            	mul	x,a
1532  0267 01            	rrwa	x,a
1533  0268 1b05          	add	a,(OFST+1,sp)
1534  026a 2401          	jrnc	L07
1535  026c 5c            	incw	x
1536  026d               L07:
1537  026d 02            	rlwa	x,a
1538  026e d60000        	ld	a,(L12_DisplayBuffer,x)
1539  0271 1401          	and	a,(OFST-3,sp)
1540                     ; 166 			break;
1542  0273 2026          	jp	LC002
1543  0275               L153:
1544                     ; 167 		case LCD_NOT:
1544                     ; 168 			DisplayBuffer[DX][x] ^= mask;
1546  0275 7b04          	ld	a,(OFST+0,sp)
1547  0277 97            	ld	xl,a
1548  0278 a6c0          	ld	a,#192
1549  027a 42            	mul	x,a
1550  027b 01            	rrwa	x,a
1551  027c 1b05          	add	a,(OFST+1,sp)
1552  027e 2401          	jrnc	L27
1553  0280 5c            	incw	x
1554  0281               L27:
1555  0281 02            	rlwa	x,a
1556  0282 d60000        	ld	a,(L12_DisplayBuffer,x)
1557  0285 1802          	xor	a,(OFST-2,sp)
1558                     ; 169 			break;
1560  0287 2012          	jp	LC002
1561  0289               L353:
1562                     ; 170 		case LCD_SET:
1562                     ; 171 			DisplayBuffer[DX][x] |= mask;
1564  0289 7b04          	ld	a,(OFST+0,sp)
1565  028b 97            	ld	xl,a
1566  028c a6c0          	ld	a,#192
1567  028e 42            	mul	x,a
1568  028f 01            	rrwa	x,a
1569  0290 1b05          	add	a,(OFST+1,sp)
1570  0292 2401          	jrnc	L47
1571  0294 5c            	incw	x
1572  0295               L47:
1573  0295 02            	rlwa	x,a
1574  0296 d60000        	ld	a,(L12_DisplayBuffer,x)
1575  0299 1a02          	or	a,(OFST-2,sp)
1576  029b               LC002:
1577  029b d70000        	ld	(L12_DisplayBuffer,x),a
1578                     ; 172 			break;
1580                     ; 173 		default:
1580                     ; 174 			break;
1582  029e               L744:
1583                     ; 162 	for( i = 0; i < len; ++i,++x)
1585  029e 0c03          	inc	(OFST-1,sp)
1586  02a0 0c05          	inc	(OFST+1,sp)
1587  02a2               L144:
1590  02a2 7b03          	ld	a,(OFST-1,sp)
1591  02a4 1109          	cp	a,(OFST+5,sp)
1592  02a6 25ad          	jrult	L534
1593                     ; 177 }
1596  02a8 5b06          	addw	sp,#6
1597  02aa 81            	ret	
1706                     ; 180 void LCD_BufferDrawXDotLine(u8 x, u8 y, u8 len, DrawMode mode)
1706                     ; 181 {
1707                     	switch	.text
1708  02ab               _LCD_BufferDrawXDotLine:
1710  02ab 89            	pushw	x
1711  02ac 5204          	subw	sp,#4
1712       00000004      OFST:	set	4
1715                     ; 182 	u8 DX = (y >> 3);
1717  02ae 9f            	ld	a,xl
1718  02af 44            	srl	a
1719  02b0 44            	srl	a
1720  02b1 44            	srl	a
1721  02b2 6b04          	ld	(OFST+0,sp),a
1722                     ; 183 	u8 BX = (y & 0x07);
1724  02b4 7b06          	ld	a,(OFST+2,sp)
1725  02b6 a407          	and	a,#7
1726  02b8 6b01          	ld	(OFST-3,sp),a
1727                     ; 184 	u8 mask = (1 << BX);
1729  02ba 5f            	clrw	x
1730  02bb 97            	ld	xl,a
1731  02bc a601          	ld	a,#1
1732  02be 5d            	tnzw	x
1733  02bf 2704          	jreq	L001
1734  02c1               L201:
1735  02c1 48            	sll	a
1736  02c2 5a            	decw	x
1737  02c3 26fc          	jrne	L201
1738  02c5               L001:
1739  02c5 6b02          	ld	(OFST-2,sp),a
1740                     ; 185 	u8 nmask = ~mask;
1742  02c7 43            	cpl	a
1743  02c8 6b01          	ld	(OFST-3,sp),a
1744                     ; 187 	for( i = 0; i < len; i+=2,x+=2)
1746  02ca 0f03          	clr	(OFST-1,sp)
1748  02cc 2051          	jra	L345
1749  02ce               L735:
1750                     ; 188 		switch(mode){
1752  02ce 7b0a          	ld	a,(OFST+6,sp)
1754                     ; 198 		default:
1754                     ; 199 			break;
1755  02d0 2708          	jreq	L154
1756  02d2 4a            	dec	a
1757  02d3 2719          	jreq	L354
1758  02d5 4a            	dec	a
1759  02d6 272a          	jreq	L554
1760  02d8 203d          	jra	L155
1761  02da               L154:
1762                     ; 189 		case LCD_CLEAR:
1762                     ; 190 			DisplayBuffer[DX][x] &= nmask;
1764  02da 7b04          	ld	a,(OFST+0,sp)
1765  02dc 97            	ld	xl,a
1766  02dd a6c0          	ld	a,#192
1767  02df 42            	mul	x,a
1768  02e0 01            	rrwa	x,a
1769  02e1 1b05          	add	a,(OFST+1,sp)
1770  02e3 2401          	jrnc	L401
1771  02e5 5c            	incw	x
1772  02e6               L401:
1773  02e6 02            	rlwa	x,a
1774  02e7 d60000        	ld	a,(L12_DisplayBuffer,x)
1775  02ea 1401          	and	a,(OFST-3,sp)
1776                     ; 191 			break;
1778  02ec 2026          	jp	LC003
1779  02ee               L354:
1780                     ; 192 		case LCD_NOT:
1780                     ; 193 			DisplayBuffer[DX][x] ^= mask;
1782  02ee 7b04          	ld	a,(OFST+0,sp)
1783  02f0 97            	ld	xl,a
1784  02f1 a6c0          	ld	a,#192
1785  02f3 42            	mul	x,a
1786  02f4 01            	rrwa	x,a
1787  02f5 1b05          	add	a,(OFST+1,sp)
1788  02f7 2401          	jrnc	L601
1789  02f9 5c            	incw	x
1790  02fa               L601:
1791  02fa 02            	rlwa	x,a
1792  02fb d60000        	ld	a,(L12_DisplayBuffer,x)
1793  02fe 1802          	xor	a,(OFST-2,sp)
1794                     ; 194 			break;
1796  0300 2012          	jp	LC003
1797  0302               L554:
1798                     ; 195 		case LCD_SET:
1798                     ; 196 			DisplayBuffer[DX][x] |= mask;
1800  0302 7b04          	ld	a,(OFST+0,sp)
1801  0304 97            	ld	xl,a
1802  0305 a6c0          	ld	a,#192
1803  0307 42            	mul	x,a
1804  0308 01            	rrwa	x,a
1805  0309 1b05          	add	a,(OFST+1,sp)
1806  030b 2401          	jrnc	L011
1807  030d 5c            	incw	x
1808  030e               L011:
1809  030e 02            	rlwa	x,a
1810  030f d60000        	ld	a,(L12_DisplayBuffer,x)
1811  0312 1a02          	or	a,(OFST-2,sp)
1812  0314               LC003:
1813  0314 d70000        	ld	(L12_DisplayBuffer,x),a
1814                     ; 197 			break;
1816                     ; 198 		default:
1816                     ; 199 			break;
1818  0317               L155:
1819                     ; 187 	for( i = 0; i < len; i+=2,x+=2)
1821  0317 0c03          	inc	(OFST-1,sp)
1822  0319 0c03          	inc	(OFST-1,sp)
1823  031b 0c05          	inc	(OFST+1,sp)
1824  031d 0c05          	inc	(OFST+1,sp)
1825  031f               L345:
1828  031f 7b03          	ld	a,(OFST-1,sp)
1829  0321 1109          	cp	a,(OFST+5,sp)
1830  0323 25a9          	jrult	L735
1831                     ; 202 }
1834  0325 5b06          	addw	sp,#6
1835  0327 81            	ret	
1917                     ; 205 static void LCD_BufferDrawYLine(u8 x, u8 y, u8 len, DrawMode mode)
1917                     ; 206 {
1918                     	switch	.text
1919  0328               L355_LCD_BufferDrawYLine:
1921  0328 89            	pushw	x
1922  0329 89            	pushw	x
1923       00000002      OFST:	set	2
1926                     ; 207 	u8 DX = (y >> 3);
1928  032a 9f            	ld	a,xl
1929  032b 44            	srl	a
1930  032c 44            	srl	a
1931  032d 44            	srl	a
1932  032e 6b02          	ld	(OFST+0,sp),a
1933                     ; 208 	u8 BX = (y & 0x07);
1935  0330 7b04          	ld	a,(OFST+2,sp)
1936  0332 a407          	and	a,#7
1937  0334 6b01          	ld	(OFST-1,sp),a
1938                     ; 209 	switch(mode){
1940  0336 7b08          	ld	a,(OFST+6,sp)
1942                     ; 219 		default:
1942                     ; 220 			break;
1943  0338 2708          	jreq	L555
1944  033a 4a            	dec	a
1945  033b 2729          	jreq	L755
1946  033d 4a            	dec	a
1947  033e 2749          	jreq	L165
1948  0340 206b          	jra	L156
1949  0342               L555:
1950                     ; 210 		case LCD_CLEAR:
1950                     ; 211 			DisplayBuffer[DX][x] &= ~(0xff << BX);
1952  0342 7b02          	ld	a,(OFST+0,sp)
1953  0344 97            	ld	xl,a
1954  0345 a6c0          	ld	a,#192
1955  0347 42            	mul	x,a
1956  0348 01            	rrwa	x,a
1957  0349 1b03          	add	a,(OFST+1,sp)
1958  034b 2401          	jrnc	L411
1959  034d 5c            	incw	x
1960  034e               L411:
1961  034e 02            	rlwa	x,a
1962  034f 7b01          	ld	a,(OFST-1,sp)
1963  0351 905f          	clrw	y
1964  0353 9097          	ld	yl,a
1965  0355 a6ff          	ld	a,#255
1966  0357 905d          	tnzw	y
1967  0359 2705          	jreq	L611
1968  035b               L021:
1969  035b 48            	sll	a
1970  035c 905a          	decw	y
1971  035e 26fb          	jrne	L021
1972  0360               L611:
1973  0360 43            	cpl	a
1974  0361 d40000        	and	a,(L12_DisplayBuffer,x)
1975                     ; 212 			break;
1977  0364 2044          	jp	LC004
1978  0366               L755:
1979                     ; 213 		case LCD_NOT:
1979                     ; 214 			DisplayBuffer[DX][x] ^= (0xff << BX);
1981  0366 7b02          	ld	a,(OFST+0,sp)
1982  0368 97            	ld	xl,a
1983  0369 a6c0          	ld	a,#192
1984  036b 42            	mul	x,a
1985  036c 01            	rrwa	x,a
1986  036d 1b03          	add	a,(OFST+1,sp)
1987  036f 2401          	jrnc	L221
1988  0371 5c            	incw	x
1989  0372               L221:
1990  0372 02            	rlwa	x,a
1991  0373 7b01          	ld	a,(OFST-1,sp)
1992  0375 905f          	clrw	y
1993  0377 9097          	ld	yl,a
1994  0379 a6ff          	ld	a,#255
1995  037b 905d          	tnzw	y
1996  037d 2705          	jreq	L421
1997  037f               L621:
1998  037f 48            	sll	a
1999  0380 905a          	decw	y
2000  0382 26fb          	jrne	L621
2001  0384               L421:
2002  0384 d80000        	xor	a,(L12_DisplayBuffer,x)
2003                     ; 215 			break;
2005  0387 2021          	jp	LC004
2006  0389               L165:
2007                     ; 216 		case LCD_SET:
2007                     ; 217 			DisplayBuffer[DX][x] |= (0xff << BX);
2009  0389 7b02          	ld	a,(OFST+0,sp)
2010  038b 97            	ld	xl,a
2011  038c a6c0          	ld	a,#192
2012  038e 42            	mul	x,a
2013  038f 01            	rrwa	x,a
2014  0390 1b03          	add	a,(OFST+1,sp)
2015  0392 2401          	jrnc	L031
2016  0394 5c            	incw	x
2017  0395               L031:
2018  0395 02            	rlwa	x,a
2019  0396 7b01          	ld	a,(OFST-1,sp)
2020  0398 905f          	clrw	y
2021  039a 9097          	ld	yl,a
2022  039c a6ff          	ld	a,#255
2023  039e 905d          	tnzw	y
2024  03a0 2705          	jreq	L231
2025  03a2               L431:
2026  03a2 48            	sll	a
2027  03a3 905a          	decw	y
2028  03a5 26fb          	jrne	L431
2029  03a7               L231:
2030  03a7 da0000        	or	a,(L12_DisplayBuffer,x)
2031  03aa               LC004:
2032  03aa d70000        	ld	(L12_DisplayBuffer,x),a
2033                     ; 218 			break;
2035                     ; 219 		default:
2035                     ; 220 			break;
2037  03ad               L156:
2038                     ; 222 	DX++;
2040  03ad 0c02          	inc	(OFST+0,sp)
2041                     ; 223 	len -= (8-BX);
2043  03af a608          	ld	a,#8
2044  03b1 1001          	sub	a,(OFST-1,sp)
2045  03b3 1007          	sub	a,(OFST+5,sp)
2046  03b5 40            	neg	a
2048  03b6 204d          	jra	L556
2049  03b8               L356:
2050                     ; 226 		switch(mode){
2052  03b8 7b08          	ld	a,(OFST+6,sp)
2054                     ; 236 			default:
2054                     ; 237 				break;
2055  03ba 2708          	jreq	L565
2056  03bc 4a            	dec	a
2057  03bd 2718          	jreq	L765
2058  03bf 4a            	dec	a
2059  03c0 2728          	jreq	L175
2060  03c2 203b          	jra	L366
2061  03c4               L565:
2062                     ; 227 			case LCD_CLEAR:
2062                     ; 228 				DisplayBuffer[DX][x] &= 0;
2064  03c4 7b02          	ld	a,(OFST+0,sp)
2065  03c6 97            	ld	xl,a
2066  03c7 a6c0          	ld	a,#192
2067  03c9 42            	mul	x,a
2068  03ca 01            	rrwa	x,a
2069  03cb 1b03          	add	a,(OFST+1,sp)
2070  03cd 2401          	jrnc	L631
2071  03cf 5c            	incw	x
2072  03d0               L631:
2073  03d0 02            	rlwa	x,a
2074  03d1 724f0000      	clr	(L12_DisplayBuffer,x)
2075                     ; 229 				break;
2077  03d5 2028          	jra	L366
2078  03d7               L765:
2079                     ; 230 			case LCD_NOT:
2079                     ; 231 				DisplayBuffer[DX][x] ^= 0xff;
2081  03d7 7b02          	ld	a,(OFST+0,sp)
2082  03d9 97            	ld	xl,a
2083  03da a6c0          	ld	a,#192
2084  03dc 42            	mul	x,a
2085  03dd 01            	rrwa	x,a
2086  03de 1b03          	add	a,(OFST+1,sp)
2087  03e0 2401          	jrnc	L041
2088  03e2 5c            	incw	x
2089  03e3               L041:
2090  03e3 02            	rlwa	x,a
2091  03e4 d60000        	ld	a,(L12_DisplayBuffer,x)
2092  03e7 43            	cpl	a
2093                     ; 232 				break;
2095  03e8 2012          	jp	LC005
2096  03ea               L175:
2097                     ; 233 			case LCD_SET:
2097                     ; 234 				DisplayBuffer[DX][x] |= 0xff;
2099  03ea 7b02          	ld	a,(OFST+0,sp)
2100  03ec 97            	ld	xl,a
2101  03ed a6c0          	ld	a,#192
2102  03ef 42            	mul	x,a
2103  03f0 01            	rrwa	x,a
2104  03f1 1b03          	add	a,(OFST+1,sp)
2105  03f3 2401          	jrnc	L241
2106  03f5 5c            	incw	x
2107  03f6               L241:
2108  03f6 02            	rlwa	x,a
2109  03f7 d60000        	ld	a,(L12_DisplayBuffer,x)
2110  03fa aaff          	or	a,#255
2111  03fc               LC005:
2112  03fc d70000        	ld	(L12_DisplayBuffer,x),a
2113                     ; 235 				break;
2115                     ; 236 			default:
2115                     ; 237 				break;
2117  03ff               L366:
2118                     ; 239 		DX++;
2120  03ff 0c02          	inc	(OFST+0,sp)
2121                     ; 240 		len -= 8;
2123  0401 7b07          	ld	a,(OFST+5,sp)
2124  0403 a008          	sub	a,#8
2125  0405               L556:
2126  0405 6b07          	ld	(OFST+5,sp),a
2127                     ; 224 	while( len >= 8 )
2129  0407 a108          	cp	a,#8
2130  0409 24ad          	jruge	L356
2131                     ; 242 	if(len)
2133  040b 7b07          	ld	a,(OFST+5,sp)
2134  040d 2778          	jreq	L566
2135                     ; 244 		switch(mode){
2137  040f 7b08          	ld	a,(OFST+6,sp)
2139                     ; 254 			default:
2139                     ; 255 				break;
2140  0411 2708          	jreq	L575
2141  0413 4a            	dec	a
2142  0414 2728          	jreq	L775
2143  0416 4a            	dec	a
2144  0417 2749          	jreq	L106
2145  0419 206c          	jra	L566
2146  041b               L575:
2147                     ; 245 			case LCD_CLEAR:
2147                     ; 246 				DisplayBuffer[DX][x] &= (0xff << len);
2149  041b 7b02          	ld	a,(OFST+0,sp)
2150  041d 97            	ld	xl,a
2151  041e a6c0          	ld	a,#192
2152  0420 42            	mul	x,a
2153  0421 01            	rrwa	x,a
2154  0422 1b03          	add	a,(OFST+1,sp)
2155  0424 2401          	jrnc	L441
2156  0426 5c            	incw	x
2157  0427               L441:
2158  0427 02            	rlwa	x,a
2159  0428 7b07          	ld	a,(OFST+5,sp)
2160  042a 905f          	clrw	y
2161  042c 9097          	ld	yl,a
2162  042e a6ff          	ld	a,#255
2163  0430 905d          	tnzw	y
2164  0432 2705          	jreq	L641
2165  0434               L051:
2166  0434 48            	sll	a
2167  0435 905a          	decw	y
2168  0437 26fb          	jrne	L051
2169  0439               L641:
2170  0439 d40000        	and	a,(L12_DisplayBuffer,x)
2171                     ; 247 				break;
2173  043c 2046          	jp	LC006
2174  043e               L775:
2175                     ; 248 			case LCD_NOT:
2175                     ; 249 				DisplayBuffer[DX][x] ^= ~(0xff << len);
2177  043e 7b02          	ld	a,(OFST+0,sp)
2178  0440 97            	ld	xl,a
2179  0441 a6c0          	ld	a,#192
2180  0443 42            	mul	x,a
2181  0444 01            	rrwa	x,a
2182  0445 1b03          	add	a,(OFST+1,sp)
2183  0447 2401          	jrnc	L251
2184  0449 5c            	incw	x
2185  044a               L251:
2186  044a 02            	rlwa	x,a
2187  044b 7b07          	ld	a,(OFST+5,sp)
2188  044d 905f          	clrw	y
2189  044f 9097          	ld	yl,a
2190  0451 a6ff          	ld	a,#255
2191  0453 905d          	tnzw	y
2192  0455 2705          	jreq	L451
2193  0457               L651:
2194  0457 48            	sll	a
2195  0458 905a          	decw	y
2196  045a 26fb          	jrne	L651
2197  045c               L451:
2198  045c 43            	cpl	a
2199  045d d80000        	xor	a,(L12_DisplayBuffer,x)
2200                     ; 250 				break;
2202  0460 2022          	jp	LC006
2203  0462               L106:
2204                     ; 251 			case LCD_SET:
2204                     ; 252 				DisplayBuffer[DX][x] |= ~(0xff << len);
2206  0462 7b02          	ld	a,(OFST+0,sp)
2207  0464 97            	ld	xl,a
2208  0465 a6c0          	ld	a,#192
2209  0467 42            	mul	x,a
2210  0468 01            	rrwa	x,a
2211  0469 1b03          	add	a,(OFST+1,sp)
2212  046b 2401          	jrnc	L061
2213  046d 5c            	incw	x
2214  046e               L061:
2215  046e 02            	rlwa	x,a
2216  046f 7b07          	ld	a,(OFST+5,sp)
2217  0471 905f          	clrw	y
2218  0473 9097          	ld	yl,a
2219  0475 a6ff          	ld	a,#255
2220  0477 905d          	tnzw	y
2221  0479 2705          	jreq	L261
2222  047b               L461:
2223  047b 48            	sll	a
2224  047c 905a          	decw	y
2225  047e 26fb          	jrne	L461
2226  0480               L261:
2227  0480 43            	cpl	a
2228  0481 da0000        	or	a,(L12_DisplayBuffer,x)
2229  0484               LC006:
2230  0484 d70000        	ld	(L12_DisplayBuffer,x),a
2231                     ; 253 				break;
2233                     ; 254 			default:
2233                     ; 255 				break;
2235  0487               L566:
2236                     ; 258 }
2239  0487 5b04          	addw	sp,#4
2240  0489 81            	ret	
2322                     ; 260 void LCD_BufferDrawYDotLine(u8 x, u8 y, u8 len, DrawMode mode)
2322                     ; 261 {
2323                     	switch	.text
2324  048a               _LCD_BufferDrawYDotLine:
2326  048a 89            	pushw	x
2327  048b 89            	pushw	x
2328       00000002      OFST:	set	2
2331                     ; 262 	u8 DX = (y >> 3);
2333  048c 9f            	ld	a,xl
2334  048d 44            	srl	a
2335  048e 44            	srl	a
2336  048f 44            	srl	a
2337  0490 6b02          	ld	(OFST+0,sp),a
2338                     ; 263 	u8 BX = (y & 0x07);
2340  0492 7b04          	ld	a,(OFST+2,sp)
2341  0494 a407          	and	a,#7
2342  0496 6b01          	ld	(OFST-1,sp),a
2343                     ; 264 	switch(mode){
2345  0498 7b08          	ld	a,(OFST+6,sp)
2347                     ; 274 		default:
2347                     ; 275 			break;
2348  049a 2708          	jreq	L376
2349  049c 4a            	dec	a
2350  049d 272b          	jreq	L576
2351  049f 4a            	dec	a
2352  04a0 274d          	jreq	L776
2353  04a2 2071          	jra	L767
2354  04a4               L376:
2355                     ; 265 		case LCD_CLEAR:
2355                     ; 266 			DisplayBuffer[DX][x] &= ~(0xff << BX)&0xaa;
2357  04a4 7b02          	ld	a,(OFST+0,sp)
2358  04a6 97            	ld	xl,a
2359  04a7 a6c0          	ld	a,#192
2360  04a9 42            	mul	x,a
2361  04aa 01            	rrwa	x,a
2362  04ab 1b03          	add	a,(OFST+1,sp)
2363  04ad 2401          	jrnc	L071
2364  04af 5c            	incw	x
2365  04b0               L071:
2366  04b0 02            	rlwa	x,a
2367  04b1 7b01          	ld	a,(OFST-1,sp)
2368  04b3 905f          	clrw	y
2369  04b5 9097          	ld	yl,a
2370  04b7 a6ff          	ld	a,#255
2371  04b9 905d          	tnzw	y
2372  04bb 2705          	jreq	L271
2373  04bd               L471:
2374  04bd 48            	sll	a
2375  04be 905a          	decw	y
2376  04c0 26fb          	jrne	L471
2377  04c2               L271:
2378  04c2 43            	cpl	a
2379  04c3 a4aa          	and	a,#170
2380  04c5 d40000        	and	a,(L12_DisplayBuffer,x)
2381                     ; 267 			break;
2383  04c8 2048          	jp	LC007
2384  04ca               L576:
2385                     ; 268 		case LCD_NOT:
2385                     ; 269 			DisplayBuffer[DX][x] ^= (0xff << BX)&0x55;
2387  04ca 7b02          	ld	a,(OFST+0,sp)
2388  04cc 97            	ld	xl,a
2389  04cd a6c0          	ld	a,#192
2390  04cf 42            	mul	x,a
2391  04d0 01            	rrwa	x,a
2392  04d1 1b03          	add	a,(OFST+1,sp)
2393  04d3 2401          	jrnc	L671
2394  04d5 5c            	incw	x
2395  04d6               L671:
2396  04d6 02            	rlwa	x,a
2397  04d7 7b01          	ld	a,(OFST-1,sp)
2398  04d9 905f          	clrw	y
2399  04db 9097          	ld	yl,a
2400  04dd a6ff          	ld	a,#255
2401  04df 905d          	tnzw	y
2402  04e1 2705          	jreq	L002
2403  04e3               L202:
2404  04e3 48            	sll	a
2405  04e4 905a          	decw	y
2406  04e6 26fb          	jrne	L202
2407  04e8               L002:
2408  04e8 a455          	and	a,#85
2409  04ea d80000        	xor	a,(L12_DisplayBuffer,x)
2410                     ; 270 			break;
2412  04ed 2023          	jp	LC007
2413  04ef               L776:
2414                     ; 271 		case LCD_SET:
2414                     ; 272 			DisplayBuffer[DX][x] |= (0xff << BX)&0x55;
2416  04ef 7b02          	ld	a,(OFST+0,sp)
2417  04f1 97            	ld	xl,a
2418  04f2 a6c0          	ld	a,#192
2419  04f4 42            	mul	x,a
2420  04f5 01            	rrwa	x,a
2421  04f6 1b03          	add	a,(OFST+1,sp)
2422  04f8 2401          	jrnc	L402
2423  04fa 5c            	incw	x
2424  04fb               L402:
2425  04fb 02            	rlwa	x,a
2426  04fc 7b01          	ld	a,(OFST-1,sp)
2427  04fe 905f          	clrw	y
2428  0500 9097          	ld	yl,a
2429  0502 a6ff          	ld	a,#255
2430  0504 905d          	tnzw	y
2431  0506 2705          	jreq	L602
2432  0508               L012:
2433  0508 48            	sll	a
2434  0509 905a          	decw	y
2435  050b 26fb          	jrne	L012
2436  050d               L602:
2437  050d a455          	and	a,#85
2438  050f da0000        	or	a,(L12_DisplayBuffer,x)
2439  0512               LC007:
2440  0512 d70000        	ld	(L12_DisplayBuffer,x),a
2441                     ; 273 			break;
2443                     ; 274 		default:
2443                     ; 275 			break;
2445  0515               L767:
2446                     ; 277 	DX++;
2448  0515 0c02          	inc	(OFST+0,sp)
2449                     ; 278 	len -= (8-BX);
2451  0517 a608          	ld	a,#8
2452  0519 1001          	sub	a,(OFST-1,sp)
2453  051b 1007          	sub	a,(OFST+5,sp)
2454  051d 40            	neg	a
2456  051e 204f          	jra	L377
2457  0520               L177:
2458                     ; 281 		switch(mode){
2460  0520 7b08          	ld	a,(OFST+6,sp)
2462                     ; 291 			default:
2462                     ; 292 				break;
2463  0522 2708          	jreq	L307
2464  0524 4a            	dec	a
2465  0525 2719          	jreq	L507
2466  0527 4a            	dec	a
2467  0528 272a          	jreq	L707
2468  052a 203d          	jra	L1001
2469  052c               L307:
2470                     ; 282 			case LCD_CLEAR:
2470                     ; 283 				DisplayBuffer[DX][x] &= 0xaa;
2472  052c 7b02          	ld	a,(OFST+0,sp)
2473  052e 97            	ld	xl,a
2474  052f a6c0          	ld	a,#192
2475  0531 42            	mul	x,a
2476  0532 01            	rrwa	x,a
2477  0533 1b03          	add	a,(OFST+1,sp)
2478  0535 2401          	jrnc	L212
2479  0537 5c            	incw	x
2480  0538               L212:
2481  0538 02            	rlwa	x,a
2482  0539 d60000        	ld	a,(L12_DisplayBuffer,x)
2483  053c a4aa          	and	a,#170
2484                     ; 284 				break;
2486  053e 2026          	jp	LC008
2487  0540               L507:
2488                     ; 285 			case LCD_NOT:
2488                     ; 286 				DisplayBuffer[DX][x] ^= 0x55;
2490  0540 7b02          	ld	a,(OFST+0,sp)
2491  0542 97            	ld	xl,a
2492  0543 a6c0          	ld	a,#192
2493  0545 42            	mul	x,a
2494  0546 01            	rrwa	x,a
2495  0547 1b03          	add	a,(OFST+1,sp)
2496  0549 2401          	jrnc	L412
2497  054b 5c            	incw	x
2498  054c               L412:
2499  054c 02            	rlwa	x,a
2500  054d d60000        	ld	a,(L12_DisplayBuffer,x)
2501  0550 a855          	xor	a,#85
2502                     ; 287 				break;
2504  0552 2012          	jp	LC008
2505  0554               L707:
2506                     ; 288 			case LCD_SET:
2506                     ; 289 				DisplayBuffer[DX][x] |= 0x55;
2508  0554 7b02          	ld	a,(OFST+0,sp)
2509  0556 97            	ld	xl,a
2510  0557 a6c0          	ld	a,#192
2511  0559 42            	mul	x,a
2512  055a 01            	rrwa	x,a
2513  055b 1b03          	add	a,(OFST+1,sp)
2514  055d 2401          	jrnc	L612
2515  055f 5c            	incw	x
2516  0560               L612:
2517  0560 02            	rlwa	x,a
2518  0561 d60000        	ld	a,(L12_DisplayBuffer,x)
2519  0564 aa55          	or	a,#85
2520  0566               LC008:
2521  0566 d70000        	ld	(L12_DisplayBuffer,x),a
2522                     ; 290 				break;
2524                     ; 291 			default:
2524                     ; 292 				break;
2526  0569               L1001:
2527                     ; 294 		DX++;
2529  0569 0c02          	inc	(OFST+0,sp)
2530                     ; 295 		len -= 8;
2532  056b 7b07          	ld	a,(OFST+5,sp)
2533  056d a008          	sub	a,#8
2534  056f               L377:
2535  056f 6b07          	ld	(OFST+5,sp),a
2536                     ; 279 	while( len >= 8 )
2538  0571 a108          	cp	a,#8
2539  0573 24ab          	jruge	L177
2540                     ; 297 	if(len)
2542  0575 7b07          	ld	a,(OFST+5,sp)
2543  0577 2603cc05fa    	jreq	L3001
2544                     ; 299 		switch(mode){
2546  057c 7b08          	ld	a,(OFST+6,sp)
2548                     ; 309 			default:
2548                     ; 310 				break;
2549  057e 2708          	jreq	L317
2550  0580 4a            	dec	a
2551  0581 272a          	jreq	L517
2552  0583 4a            	dec	a
2553  0584 274d          	jreq	L717
2554  0586 2072          	jra	L3001
2555  0588               L317:
2556                     ; 300 			case LCD_CLEAR:
2556                     ; 301 				DisplayBuffer[DX][x] &= (0xff << len)&0xaa;
2558  0588 7b02          	ld	a,(OFST+0,sp)
2559  058a 97            	ld	xl,a
2560  058b a6c0          	ld	a,#192
2561  058d 42            	mul	x,a
2562  058e 01            	rrwa	x,a
2563  058f 1b03          	add	a,(OFST+1,sp)
2564  0591 2401          	jrnc	L022
2565  0593 5c            	incw	x
2566  0594               L022:
2567  0594 02            	rlwa	x,a
2568  0595 7b07          	ld	a,(OFST+5,sp)
2569  0597 905f          	clrw	y
2570  0599 9097          	ld	yl,a
2571  059b a6ff          	ld	a,#255
2572  059d 905d          	tnzw	y
2573  059f 2705          	jreq	L222
2574  05a1               L422:
2575  05a1 48            	sll	a
2576  05a2 905a          	decw	y
2577  05a4 26fb          	jrne	L422
2578  05a6               L222:
2579  05a6 a4aa          	and	a,#170
2580  05a8 d40000        	and	a,(L12_DisplayBuffer,x)
2581                     ; 302 				break;
2583  05ab 204a          	jp	LC009
2584  05ad               L517:
2585                     ; 303 			case LCD_NOT:
2585                     ; 304 				DisplayBuffer[DX][x] ^= ~(0xff << len)&0x55;
2587  05ad 7b02          	ld	a,(OFST+0,sp)
2588  05af 97            	ld	xl,a
2589  05b0 a6c0          	ld	a,#192
2590  05b2 42            	mul	x,a
2591  05b3 01            	rrwa	x,a
2592  05b4 1b03          	add	a,(OFST+1,sp)
2593  05b6 2401          	jrnc	L622
2594  05b8 5c            	incw	x
2595  05b9               L622:
2596  05b9 02            	rlwa	x,a
2597  05ba 7b07          	ld	a,(OFST+5,sp)
2598  05bc 905f          	clrw	y
2599  05be 9097          	ld	yl,a
2600  05c0 a6ff          	ld	a,#255
2601  05c2 905d          	tnzw	y
2602  05c4 2705          	jreq	L032
2603  05c6               L232:
2604  05c6 48            	sll	a
2605  05c7 905a          	decw	y
2606  05c9 26fb          	jrne	L232
2607  05cb               L032:
2608  05cb 43            	cpl	a
2609  05cc a455          	and	a,#85
2610  05ce d80000        	xor	a,(L12_DisplayBuffer,x)
2611                     ; 305 				break;
2613  05d1 2024          	jp	LC009
2614  05d3               L717:
2615                     ; 306 			case LCD_SET:
2615                     ; 307 				DisplayBuffer[DX][x] |= ~(0xff << len)&0x55;
2617  05d3 7b02          	ld	a,(OFST+0,sp)
2618  05d5 97            	ld	xl,a
2619  05d6 a6c0          	ld	a,#192
2620  05d8 42            	mul	x,a
2621  05d9 01            	rrwa	x,a
2622  05da 1b03          	add	a,(OFST+1,sp)
2623  05dc 2401          	jrnc	L432
2624  05de 5c            	incw	x
2625  05df               L432:
2626  05df 02            	rlwa	x,a
2627  05e0 7b07          	ld	a,(OFST+5,sp)
2628  05e2 905f          	clrw	y
2629  05e4 9097          	ld	yl,a
2630  05e6 a6ff          	ld	a,#255
2631  05e8 905d          	tnzw	y
2632  05ea 2705          	jreq	L632
2633  05ec               L042:
2634  05ec 48            	sll	a
2635  05ed 905a          	decw	y
2636  05ef 26fb          	jrne	L042
2637  05f1               L632:
2638  05f1 43            	cpl	a
2639  05f2 a455          	and	a,#85
2640  05f4 da0000        	or	a,(L12_DisplayBuffer,x)
2641  05f7               LC009:
2642  05f7 d70000        	ld	(L12_DisplayBuffer,x),a
2643                     ; 308 				break;
2645                     ; 309 			default:
2645                     ; 310 				break;
2647  05fa               L3001:
2648                     ; 313 }
2651  05fa 5b04          	addw	sp,#4
2652  05fc 81            	ret	
2799                     ; 317 void LCD_BufferDrawLine(u8 x1, u8 y1, u8 x2, u8 y2, DrawMode mode)
2799                     ; 318 {
2800                     	switch	.text
2801  05fd               _LCD_BufferDrawLine:
2803  05fd 89            	pushw	x
2804  05fe 520d          	subw	sp,#13
2805       0000000d      OFST:	set	13
2808                     ; 321 	if( y1 > y2)
2810  0600 9f            	ld	a,xl
2811  0601 1113          	cp	a,(OFST+6,sp)
2812  0603 2317          	jrule	L7011
2813                     ; 323 		t = x1, x1 = x2, x2 = t;
2815  0605 9e            	ld	a,xh
2816  0606 6b03          	ld	(OFST-10,sp),a
2817  0608 7b12          	ld	a,(OFST+5,sp)
2818  060a 6b0e          	ld	(OFST+1,sp),a
2819  060c 7b03          	ld	a,(OFST-10,sp)
2820  060e 6b12          	ld	(OFST+5,sp),a
2821                     ; 324 		t = y1, y1 = y2, y2 = t;
2823  0610 7b0f          	ld	a,(OFST+2,sp)
2824  0612 6b03          	ld	(OFST-10,sp),a
2825  0614 7b13          	ld	a,(OFST+6,sp)
2826  0616 6b0f          	ld	(OFST+2,sp),a
2827  0618 7b03          	ld	a,(OFST-10,sp)
2828  061a 6b13          	ld	(OFST+6,sp),a
2829  061c               L7011:
2830                     ; 326 	dx = x2 - x1;
2832  061c 7b12          	ld	a,(OFST+5,sp)
2833  061e 5f            	clrw	x
2834  061f 100e          	sub	a,(OFST+1,sp)
2835  0621 2401          	jrnc	L442
2836  0623 5a            	decw	x
2837  0624               L442:
2838  0624 02            	rlwa	x,a
2839  0625 1f08          	ldw	(OFST-5,sp),x
2840                     ; 327 	dy = y2 - y1;
2842  0627 5f            	clrw	x
2843  0628 7b13          	ld	a,(OFST+6,sp)
2844  062a 100f          	sub	a,(OFST+2,sp)
2845  062c 2401          	jrnc	L642
2846  062e 5a            	decw	x
2847  062f               L642:
2848  062f 02            	rlwa	x,a
2849  0630 1f04          	ldw	(OFST-9,sp),x
2850                     ; 328 	x = x1, y = y1;
2852  0632 7b0e          	ld	a,(OFST+1,sp)
2853  0634 6b0a          	ld	(OFST-3,sp),a
2854  0636 7b0f          	ld	a,(OFST+2,sp)
2855  0638 6b0b          	ld	(OFST-2,sp),a
2856                     ; 329 	if( 0 == dx )
2858  063a 1e08          	ldw	x,(OFST-5,sp)
2859  063c 2611          	jrne	L1111
2860                     ; 331 			LCD_BufferDrawYLine(x1, y1, dy, mode);
2862  063e 7b14          	ld	a,(OFST+7,sp)
2863  0640 88            	push	a
2864  0641 7b06          	ld	a,(OFST-7,sp)
2865  0643 88            	push	a
2866  0644 7b11          	ld	a,(OFST+4,sp)
2867  0646 97            	ld	xl,a
2868  0647 7b10          	ld	a,(OFST+3,sp)
2869  0649 95            	ld	xh,a
2870  064a cd0328        	call	L355_LCD_BufferDrawYLine
2873  064d 2026          	jp	LC010
2874  064f               L1111:
2875                     ; 333 	else if( 0 == dy )
2877  064f 1e04          	ldw	x,(OFST-9,sp)
2878  0651 262a          	jrne	L5111
2879                     ; 335 			if( x1 > x2 )
2881  0653 7b0e          	ld	a,(OFST+1,sp)
2882  0655 1112          	cp	a,(OFST+5,sp)
2883  0657 230d          	jrule	L7111
2884                     ; 336 				LCD_BufferDrawXLine(x2, y2, dx, mode);
2886  0659 7b14          	ld	a,(OFST+7,sp)
2887  065b 88            	push	a
2888  065c 7b0a          	ld	a,(OFST-3,sp)
2889  065e 88            	push	a
2890  065f 7b15          	ld	a,(OFST+8,sp)
2891  0661 97            	ld	xl,a
2892  0662 7b14          	ld	a,(OFST+7,sp)
2895  0664 200b          	jp	LC011
2896  0666               L7111:
2897                     ; 338 				LCD_BufferDrawXLine(x1, y1, dx, mode);
2899  0666 7b14          	ld	a,(OFST+7,sp)
2900  0668 88            	push	a
2901  0669 7b0a          	ld	a,(OFST-3,sp)
2902  066b 88            	push	a
2903  066c 7b11          	ld	a,(OFST+4,sp)
2904  066e 97            	ld	xl,a
2905  066f 7b10          	ld	a,(OFST+3,sp)
2906  0671               LC011:
2907  0671 95            	ld	xh,a
2908  0672 cd0232        	call	L543_LCD_BufferDrawXLine
2910  0675               LC010:
2911  0675 85            	popw	x
2912  0676               L3111:
2913                     ; 430     dirty = 1;
2915  0676 35010000      	mov	L71_dirty,#1
2916                     ; 431 }
2919  067a 5b0f          	addw	sp,#15
2920  067c 81            	ret	
2921  067d               L5111:
2922                     ; 343 		if( abs(dx) > abs(dy) )
2924  067d 9c            	rvf	
2925  067e 2c01          	jrsgt	L062
2926  0680 50            	negw	x
2927  0681               L062:
2928  0681 1f01          	ldw	(OFST-12,sp),x
2929  0683 9c            	rvf	
2930  0684 1e08          	ldw	x,(OFST-5,sp)
2931  0686 2c01          	jrsgt	L462
2932  0688 50            	negw	x
2933  0689               L462:
2934  0689 1301          	cpw	x,(OFST-12,sp)
2935  068b 2c03cc0733    	jrsle	L5211
2936                     ; 345 			if( x2 > x1)
2938  0690 7b12          	ld	a,(OFST+5,sp)
2939  0692 110e          	cp	a,(OFST+1,sp)
2940  0694 233f          	jrule	L7211
2941                     ; 348 				d = 2 * dy - dx;
2943  0696 1e04          	ldw	x,(OFST-9,sp)
2944  0698 58            	sllw	x
2945  0699 72f008        	subw	x,(OFST-5,sp)
2946  069c 1f0c          	ldw	(OFST-1,sp),x
2947                     ; 349 				incrE = 2 * dy;
2949  069e 1e04          	ldw	x,(OFST-9,sp)
2950  06a0 58            	sllw	x
2951  06a1 1f06          	ldw	(OFST-7,sp),x
2952                     ; 350 				incrNE = 2 * (dy - dx);
2954  06a3 1e04          	ldw	x,(OFST-9,sp)
2955  06a5 72f008        	subw	x,(OFST-5,sp)
2956  06a8 58            	sllw	x
2957  06a9 1f08          	ldw	(OFST-5,sp),x
2959  06ab 201e          	jra	L5311
2960  06ad               L1311:
2961                     ; 353 					LCD_BufferDrawPixel(x, y, mode);
2963  06ad 88            	push	a
2964  06ae 7b0c          	ld	a,(OFST-1,sp)
2965  06b0 97            	ld	xl,a
2966  06b1 7b0b          	ld	a,(OFST-2,sp)
2967  06b3 95            	ld	xh,a
2968  06b4 cd0198        	call	_LCD_BufferDrawPixel
2970  06b7 84            	pop	a
2971                     ; 354 					x++;
2973  06b8 0c0a          	inc	(OFST-3,sp)
2974                     ; 355 					if( d > 0 )
2976  06ba 9c            	rvf	
2977  06bb 1e0c          	ldw	x,(OFST-1,sp)
2978  06bd 2d07          	jrsle	L1411
2979                     ; 357 						y++;
2981  06bf 0c0b          	inc	(OFST-2,sp)
2982                     ; 358 						d += incrNE;
2984  06c1 72fb08        	addw	x,(OFST-5,sp)
2986  06c4 2003          	jp	LC013
2987  06c6               L1411:
2988                     ; 361 						d += incrE;
2990  06c6 72fb06        	addw	x,(OFST-7,sp)
2991  06c9               LC013:
2992  06c9 1f0c          	ldw	(OFST-1,sp),x
2993  06cb               L5311:
2994                     ; 351 				while( x < x2 )
2996  06cb 7b0a          	ld	a,(OFST-3,sp)
2997  06cd 1112          	cp	a,(OFST+5,sp)
2998  06cf 7b14          	ld	a,(OFST+7,sp)
2999  06d1 25da          	jrult	L1311
3000                     ; 363 				LCD_BufferDrawPixel(x, y, mode);
3003  06d3 2050          	jp	LC012
3004  06d5               L7211:
3005                     ; 368 				d = -2 * dy - dx;
3007  06d5 1e04          	ldw	x,(OFST-9,sp)
3008  06d7 90aefffe      	ldw	y,#65534
3009  06db cd0000        	call	c_imul
3011  06de 72f008        	subw	x,(OFST-5,sp)
3012  06e1 1f0c          	ldw	(OFST-1,sp),x
3013                     ; 369 				incrE = -2 * dy;
3015  06e3 90aefffe      	ldw	y,#65534
3016  06e7 1e04          	ldw	x,(OFST-9,sp)
3017  06e9 cd0000        	call	c_imul
3019  06ec 1f06          	ldw	(OFST-7,sp),x
3020                     ; 370 				incrNE = -2 * (dy + dx);
3022  06ee 1e04          	ldw	x,(OFST-9,sp)
3023  06f0 72fb08        	addw	x,(OFST-5,sp)
3024  06f3 90aefffe      	ldw	y,#65534
3025  06f7 cd0000        	call	c_imul
3027  06fa 1f08          	ldw	(OFST-5,sp),x
3029  06fc 201f          	jra	L3511
3030  06fe               L7411:
3031                     ; 373 					LCD_BufferDrawPixel(x, y, mode);
3033  06fe 7b14          	ld	a,(OFST+7,sp)
3034  0700 88            	push	a
3035  0701 7b0c          	ld	a,(OFST-1,sp)
3036  0703 97            	ld	xl,a
3037  0704 7b0b          	ld	a,(OFST-2,sp)
3038  0706 95            	ld	xh,a
3039  0707 cd0198        	call	_LCD_BufferDrawPixel
3041  070a 84            	pop	a
3042                     ; 374 					x--;
3044  070b 0a0a          	dec	(OFST-3,sp)
3045                     ; 375 					if( d < 0 )
3047  070d 1e0c          	ldw	x,(OFST-1,sp)
3048  070f 2a07          	jrpl	L7511
3049                     ; 377 						y++;
3051  0711 0c0b          	inc	(OFST-2,sp)
3052                     ; 378 						d += incrNE;
3054  0713 72fb08        	addw	x,(OFST-5,sp)
3056  0716 2003          	jp	LC014
3057  0718               L7511:
3058                     ; 381 						d += incrE;
3060  0718 72fb06        	addw	x,(OFST-7,sp)
3061  071b               LC014:
3062  071b 1f0c          	ldw	(OFST-1,sp),x
3063  071d               L3511:
3064                     ; 371 				while( x > x2)
3066  071d 7b0a          	ld	a,(OFST-3,sp)
3067  071f 1112          	cp	a,(OFST+5,sp)
3068  0721 22db          	jrugt	L7411
3069                     ; 383 				LCD_BufferDrawPixel(x, y, mode);			
3071  0723               LC015:
3074  0723 7b14          	ld	a,(OFST+7,sp)
3076  0725               LC012:
3078  0725 88            	push	a
3079  0726 7b0c          	ld	a,(OFST-1,sp)
3080  0728 97            	ld	xl,a
3081  0729 7b0b          	ld	a,(OFST-2,sp)
3082  072b 95            	ld	xh,a
3083  072c cd0198        	call	_LCD_BufferDrawPixel
3084  072f 84            	pop	a
3085  0730 cc0676        	jra	L3111
3086  0733               L5211:
3087                     ; 388 			if( x2 > x1)
3089  0733 7b12          	ld	a,(OFST+5,sp)
3090  0735 110e          	cp	a,(OFST+1,sp)
3091  0737 2348          	jrule	L5611
3092                     ; 391 				d = dy - 2 * dx;
3094  0739 1e08          	ldw	x,(OFST-5,sp)
3095  073b 58            	sllw	x
3096  073c 1f01          	ldw	(OFST-12,sp),x
3097  073e 1e04          	ldw	x,(OFST-9,sp)
3098  0740 72f001        	subw	x,(OFST-12,sp)
3099  0743 1f0c          	ldw	(OFST-1,sp),x
3100                     ; 392 				incrE = -2 * dx;
3102  0745 90aefffe      	ldw	y,#65534
3103  0749 1e08          	ldw	x,(OFST-5,sp)
3104  074b cd0000        	call	c_imul
3106  074e 1f06          	ldw	(OFST-7,sp),x
3107                     ; 393 				incrNE = 2 * (dy - dx);
3109  0750 1e04          	ldw	x,(OFST-9,sp)
3110  0752 72f008        	subw	x,(OFST-5,sp)
3111  0755 58            	sllw	x
3112  0756 1f08          	ldw	(OFST-5,sp),x
3114  0758 201f          	jra	L3711
3115  075a               L7611:
3116                     ; 396 					LCD_BufferDrawPixel(x, y, mode);
3118  075a 7b14          	ld	a,(OFST+7,sp)
3119  075c 88            	push	a
3120  075d 7b0c          	ld	a,(OFST-1,sp)
3121  075f 97            	ld	xl,a
3122  0760 7b0b          	ld	a,(OFST-2,sp)
3123  0762 95            	ld	xh,a
3124  0763 cd0198        	call	_LCD_BufferDrawPixel
3126  0766 84            	pop	a
3127                     ; 397 					y++;
3129  0767 0c0b          	inc	(OFST-2,sp)
3130                     ; 398 					if( d < 0 )	
3132  0769 1e0c          	ldw	x,(OFST-1,sp)
3133  076b 2a07          	jrpl	L7711
3134                     ; 400 						x++;
3136  076d 0c0a          	inc	(OFST-3,sp)
3137                     ; 401 						d += incrNE;
3139  076f 72fb08        	addw	x,(OFST-5,sp)
3141  0772 2003          	jp	LC016
3142  0774               L7711:
3143                     ; 404 						d += incrE;
3145  0774 72fb06        	addw	x,(OFST-7,sp)
3146  0777               LC016:
3147  0777 1f0c          	ldw	(OFST-1,sp),x
3148  0779               L3711:
3149                     ; 394 				while( y < y2 )
3151  0779 7b0b          	ld	a,(OFST-2,sp)
3152  077b 1113          	cp	a,(OFST+6,sp)
3153  077d 25db          	jrult	L7611
3154                     ; 406 				LCD_BufferDrawPixel(x, y, mode);
3157  077f 20a2          	jp	LC015
3158  0781               L5611:
3159                     ; 411 				d = -dy - 2 * dx;
3161  0781 1e08          	ldw	x,(OFST-5,sp)
3162  0783 58            	sllw	x
3163  0784 1f01          	ldw	(OFST-12,sp),x
3164  0786 1e04          	ldw	x,(OFST-9,sp)
3165  0788 50            	negw	x
3166  0789 72f001        	subw	x,(OFST-12,sp)
3167  078c 1f0c          	ldw	(OFST-1,sp),x
3168                     ; 412 				incrE = -2 * dx;
3170  078e 90aefffe      	ldw	y,#65534
3171  0792 1e08          	ldw	x,(OFST-5,sp)
3172  0794 cd0000        	call	c_imul
3174  0797 1f06          	ldw	(OFST-7,sp),x
3175                     ; 413 				incrNE = -2 * (dy + dx);
3177  0799 1e04          	ldw	x,(OFST-9,sp)
3178  079b 72fb08        	addw	x,(OFST-5,sp)
3179  079e 90aefffe      	ldw	y,#65534
3180  07a2 cd0000        	call	c_imul
3182  07a5 1f08          	ldw	(OFST-5,sp),x
3184  07a7 2020          	jra	L1121
3185  07a9               L5021:
3186                     ; 416 					LCD_BufferDrawPixel(x, y, mode);
3188  07a9 7b14          	ld	a,(OFST+7,sp)
3189  07ab 88            	push	a
3190  07ac 7b0c          	ld	a,(OFST-1,sp)
3191  07ae 97            	ld	xl,a
3192  07af 7b0b          	ld	a,(OFST-2,sp)
3193  07b1 95            	ld	xh,a
3194  07b2 cd0198        	call	_LCD_BufferDrawPixel
3196  07b5 84            	pop	a
3197                     ; 417 					y++;
3199  07b6 0c0b          	inc	(OFST-2,sp)
3200                     ; 418 					if( d > 0 )
3202  07b8 9c            	rvf	
3203  07b9 1e0c          	ldw	x,(OFST-1,sp)
3204  07bb 2d07          	jrsle	L5121
3205                     ; 420 						x--;
3207  07bd 0a0a          	dec	(OFST-3,sp)
3208                     ; 421 						d += incrNE;
3210  07bf 72fb08        	addw	x,(OFST-5,sp)
3212  07c2 2003          	jp	LC017
3213  07c4               L5121:
3214                     ; 424 						d += incrE;
3216  07c4 72fb06        	addw	x,(OFST-7,sp)
3217  07c7               LC017:
3218  07c7 1f0c          	ldw	(OFST-1,sp),x
3219  07c9               L1121:
3220                     ; 414 				while( y < y2 )
3222  07c9 7b0b          	ld	a,(OFST-2,sp)
3223  07cb 1113          	cp	a,(OFST+6,sp)
3224  07cd 25da          	jrult	L5021
3225                     ; 426 				LCD_BufferDrawPixel(x, y, mode);
3227  07cf cc0723        	jp	LC015
3310                     ; 433 void LCD_BufferToLCD(void)
3310                     ; 434 {
3311                     	switch	.text
3312  07d2               _LCD_BufferToLCD:
3314  07d2 5206          	subw	sp,#6
3315       00000006      OFST:	set	6
3318                     ; 439     if( dirty == 0)
3320  07d4 b600          	ld	a,L71_dirty
3321  07d6 2776          	jreq	L623
3322                     ; 440         return;
3324                     ; 442     for(chip = 0, j = 0; chip < 3; ++chip, j+=64)
3326  07d8 0f06          	clr	(OFST+0,sp)
3327  07da 0f02          	clr	(OFST-4,sp)
3329  07dc 2068          	jra	L1721
3330  07de               L5621:
3331                     ; 444         AddX = LCD_XPAGE_BASE;
3333  07de a6b8          	ld	a,#184
3334  07e0 6b03          	ld	(OFST-3,sp),a
3335                     ; 445         AddY = LCD_YADDR_BASE;
3337  07e2 a640          	ld	a,#64
3338  07e4 6b01          	ld	(OFST-5,sp),a
3339                     ; 446         LCD_WriteCommand(LCD_DISPLAY_ON, chip);
3341  07e6 7b06          	ld	a,(OFST+0,sp)
3342  07e8 97            	ld	xl,a
3343  07e9 a63f          	ld	a,#63
3344  07eb 95            	ld	xh,a
3345  07ec cd0000        	call	_LCD_WriteCommand
3347                     ; 447         LCD_WriteCommand(LCD_START_LINE, chip);
3349  07ef 7b06          	ld	a,(OFST+0,sp)
3350  07f1 97            	ld	xl,a
3351  07f2 a6c0          	ld	a,#192
3352  07f4 95            	ld	xh,a
3353  07f5 cd0000        	call	_LCD_WriteCommand
3355                     ; 448         for( x = 0; x < 8; ++x )
3357  07f8 0f04          	clr	(OFST-2,sp)
3358  07fa               L5721:
3359                     ; 450             LCD_WriteCommand(AddX, chip);
3361  07fa 7b06          	ld	a,(OFST+0,sp)
3362  07fc 97            	ld	xl,a
3363  07fd 7b03          	ld	a,(OFST-3,sp)
3364  07ff 95            	ld	xh,a
3365  0800 cd0000        	call	_LCD_WriteCommand
3367                     ; 451             LCD_WriteCommand(AddY, chip);
3369  0803 7b06          	ld	a,(OFST+0,sp)
3370  0805 97            	ld	xl,a
3371  0806 7b01          	ld	a,(OFST-5,sp)
3372  0808 95            	ld	xh,a
3373  0809 cd0000        	call	_LCD_WriteCommand
3375                     ; 452             for( y = 0; y < 64; ++y )
3377  080c 0f05          	clr	(OFST-1,sp)
3378  080e               L3031:
3379                     ; 454                 LCD_WriteData(DisplayBuffer[x][y+j], chip);
3381  080e 7b06          	ld	a,(OFST+0,sp)
3382  0810 97            	ld	xl,a
3383  0811 89            	pushw	x
3384  0812 7b06          	ld	a,(OFST+0,sp)
3385  0814 97            	ld	xl,a
3386  0815 a6c0          	ld	a,#192
3387  0817 42            	mul	x,a
3388  0818 01            	rrwa	x,a
3389  0819 1b04          	add	a,(OFST-2,sp)
3390  081b 2401          	jrnc	L223
3391  081d 5c            	incw	x
3392  081e               L223:
3393  081e 1b07          	add	a,(OFST+1,sp)
3394  0820 2401          	jrnc	L423
3395  0822 5c            	incw	x
3396  0823               L423:
3397  0823 02            	rlwa	x,a
3398  0824 d60000        	ld	a,(L12_DisplayBuffer,x)
3399  0827 85            	popw	x
3400  0828 95            	ld	xh,a
3401  0829 cd002e        	call	_LCD_WriteData
3403                     ; 452             for( y = 0; y < 64; ++y )
3405  082c 0c05          	inc	(OFST-1,sp)
3408  082e 7b05          	ld	a,(OFST-1,sp)
3409  0830 a140          	cp	a,#64
3410  0832 25da          	jrult	L3031
3411                     ; 456             AddX++;
3413  0834 0c03          	inc	(OFST-3,sp)
3414                     ; 448         for( x = 0; x < 8; ++x )
3416  0836 0c04          	inc	(OFST-2,sp)
3419  0838 7b04          	ld	a,(OFST-2,sp)
3420  083a a108          	cp	a,#8
3421  083c 25bc          	jrult	L5721
3422                     ; 442     for(chip = 0, j = 0; chip < 3; ++chip, j+=64)
3424  083e 0c06          	inc	(OFST+0,sp)
3425  0840 7b02          	ld	a,(OFST-4,sp)
3426  0842 ab40          	add	a,#64
3427  0844 6b02          	ld	(OFST-4,sp),a
3428  0846               L1721:
3431  0846 7b06          	ld	a,(OFST+0,sp)
3432  0848 a103          	cp	a,#3
3433  084a 2592          	jrult	L5621
3434                     ; 459     dirty = 0;
3436  084c 3f00          	clr	L71_dirty
3437                     ; 460 }
3438  084e               L623:
3441  084e 5b06          	addw	sp,#6
3442  0850 81            	ret	
3487                     ; 462 void LCD_Clear(void)
3487                     ; 463 {
3488                     	switch	.text
3489  0851               _LCD_Clear:
3491  0851 89            	pushw	x
3492       00000002      OFST:	set	2
3495                     ; 465 	for( i = 0; i < 8; ++i )
3497  0852 0f01          	clr	(OFST-1,sp)
3498  0854               L3331:
3499                     ; 467         for(j = 0; j < 192; ++j)
3501  0854 0f02          	clr	(OFST+0,sp)
3502  0856               L1431:
3503                     ; 468             DisplayBuffer[i][j] = 0;
3505  0856 7b01          	ld	a,(OFST-1,sp)
3506  0858 97            	ld	xl,a
3507  0859 a6c0          	ld	a,#192
3508  085b 42            	mul	x,a
3509  085c 01            	rrwa	x,a
3510  085d 1b02          	add	a,(OFST+0,sp)
3511  085f 2401          	jrnc	L233
3512  0861 5c            	incw	x
3513  0862               L233:
3514  0862 02            	rlwa	x,a
3515  0863 724f0000      	clr	(L12_DisplayBuffer,x)
3516                     ; 467         for(j = 0; j < 192; ++j)
3518  0867 0c02          	inc	(OFST+0,sp)
3521  0869 7b02          	ld	a,(OFST+0,sp)
3522  086b a1c0          	cp	a,#192
3523  086d 25e7          	jrult	L1431
3524                     ; 465 	for( i = 0; i < 8; ++i )
3526  086f 0c01          	inc	(OFST-1,sp)
3529  0871 7b01          	ld	a,(OFST-1,sp)
3530  0873 a108          	cp	a,#8
3531  0875 25dd          	jrult	L3331
3532                     ; 470     dirty = 1;
3534  0877 35010000      	mov	L71_dirty,#1
3535                     ; 471 }
3538  087b 85            	popw	x
3539  087c 81            	ret	
3601                     ; 474 static void LCD_GoTextXY(u8 x, u8 y)
3601                     ; 475 { 
3602                     	switch	.text
3603  087d               L7431_LCD_GoTextXY:
3605  087d 89            	pushw	x
3606  087e 89            	pushw	x
3607       00000002      OFST:	set	2
3610                     ; 477     u8 tmp = x * 6;
3612  087f 9e            	ld	a,xh
3613  0880 97            	ld	xl,a
3614  0881 a606          	ld	a,#6
3615  0883 42            	mul	x,a
3616  0884 9f            	ld	a,xl
3617  0885 6b02          	ld	(OFST+0,sp),a
3618                     ; 478     if(tmp > 192) tmp=0;       // еַΧͻص0  
3620  0887 a1c1          	cp	a,#193
3621  0889 2502          	jrult	L3041
3624  088b 0f02          	clr	(OFST+0,sp)
3625  088d               L3041:
3626                     ; 479     if(y > 8) y=0;             // еַΧͻص0  
3628  088d 7b04          	ld	a,(OFST+2,sp)
3629  088f a109          	cp	a,#9
3630  0891 2502          	jrult	L5041
3633  0893 0f04          	clr	(OFST+2,sp)
3634  0895               L5041:
3635                     ; 480     if( tmp < 64 )
3637  0895 7b02          	ld	a,(OFST+0,sp)
3638  0897 a140          	cp	a,#64
3639  0899 2404          	jruge	L7041
3640                     ; 482         chip = LCD_LEFT;
3642  089b 0f01          	clr	(OFST-1,sp)
3644  089d 2018          	jra	L1141
3645  089f               L7041:
3646                     ; 484     else if( tmp < 128 )
3648  089f a180          	cp	a,#128
3649  08a1 240a          	jruge	L3141
3650                     ; 486         chip = LCD_MID;
3652  08a3 a601          	ld	a,#1
3653  08a5 6b01          	ld	(OFST-1,sp),a
3654                     ; 487         tmp -= 64;
3656  08a7 7b02          	ld	a,(OFST+0,sp)
3657  08a9 a040          	sub	a,#64
3659  08ab 2008          	jp	LC018
3660  08ad               L3141:
3661                     ; 490         chip = LCD_RIGHT;
3663  08ad a602          	ld	a,#2
3664  08af 6b01          	ld	(OFST-1,sp),a
3665                     ; 491         tmp -= 128;
3667  08b1 7b02          	ld	a,(OFST+0,sp)
3668  08b3 a080          	sub	a,#128
3669  08b5               LC018:
3670  08b5 6b02          	ld	(OFST+0,sp),a
3671  08b7               L1141:
3672                     ; 493     LCD_WriteCommand(LCD_XPAGE_BASE+y, chip);
3674  08b7 7b01          	ld	a,(OFST-1,sp)
3675  08b9 97            	ld	xl,a
3676  08ba 7b04          	ld	a,(OFST+2,sp)
3677  08bc abb8          	add	a,#184
3678  08be 95            	ld	xh,a
3679  08bf cd0000        	call	_LCD_WriteCommand
3681                     ; 494     LCD_WriteCommand(LCD_YADDR_BASE+tmp, chip);
3683  08c2 7b01          	ld	a,(OFST-1,sp)
3684  08c4 97            	ld	xl,a
3685  08c5 7b02          	ld	a,(OFST+0,sp)
3686  08c7 ab40          	add	a,#64
3687  08c9 95            	ld	xh,a
3688  08ca cd0000        	call	_LCD_WriteCommand
3690                     ; 495 } 
3693  08cd 5b04          	addw	sp,#4
3694  08cf 81            	ret	
3776                     ; 498 void LCD_PutChar5x8(u8 x, u8 y, unsigned char ASCII)
3776                     ; 499 {
3777                     	switch	.text
3778  08d0               _LCD_PutChar5x8:
3780  08d0 89            	pushw	x
3781  08d1 5205          	subw	sp,#5
3782       00000005      OFST:	set	5
3785                     ; 502     u8 tmp = x * 6;                // һַռĻ6             
3787  08d3 9e            	ld	a,xh
3788  08d4 97            	ld	xl,a
3789  08d5 a606          	ld	a,#6
3790  08d7 42            	mul	x,a
3791  08d8 9f            	ld	a,xl
3792  08d9 6b02          	ld	(OFST-3,sp),a
3793                     ; 503     No = ASCII - 32;               // ģɿո  ʼոASCIIֵ32  
3795  08db 5f            	clrw	x
3796  08dc 7b0a          	ld	a,(OFST+5,sp)
3797  08de 97            	ld	xl,a
3798  08df 1d0020        	subw	x,#32
3799                     ; 504     No = No * 5;                   // ÿַģ5 ֽ 
3801  08e2 90ae0005      	ldw	y,#5
3802  08e6 cd0000        	call	c_imul
3804  08e9 1f03          	ldw	(OFST-2,sp),x
3805                     ; 506     for(i = 0; i < 5; ++i)         // һַģ5 ֽ,5*8  
3807  08eb 0f05          	clr	(OFST+0,sp)
3808  08ed               L1641:
3809                     ; 508         DisplayBuffer[y][tmp++] = cAscii5x8Bitmap[No++]; 
3811  08ed 7b02          	ld	a,(OFST-3,sp)
3812  08ef 0c02          	inc	(OFST-3,sp)
3813  08f1 6b01          	ld	(OFST-4,sp),a
3814  08f3 7b07          	ld	a,(OFST+2,sp)
3815  08f5 97            	ld	xl,a
3816  08f6 a6c0          	ld	a,#192
3817  08f8 42            	mul	x,a
3818  08f9 01            	rrwa	x,a
3819  08fa 1b01          	add	a,(OFST-4,sp)
3820  08fc 2401          	jrnc	L443
3821  08fe 5c            	incw	x
3822  08ff               L443:
3823  08ff 1603          	ldw	y,(OFST-2,sp)
3824  0901 02            	rlwa	x,a
3825  0902 90d60000      	ld	a,(_cAscii5x8Bitmap,y)
3826  0906 905c          	incw	y
3827  0908 1703          	ldw	(OFST-2,sp),y
3828  090a d70000        	ld	(L12_DisplayBuffer,x),a
3829                     ; 506     for(i = 0; i < 5; ++i)         // һַģ5 ֽ,5*8  
3831  090d 0c05          	inc	(OFST+0,sp)
3834  090f 7b05          	ld	a,(OFST+0,sp)
3835  0911 a105          	cp	a,#5
3836  0913 25d8          	jrult	L1641
3837                     ; 510     dirty = 1;
3839  0915 35010000      	mov	L71_dirty,#1
3840                     ; 511 }    
3843  0919 5b07          	addw	sp,#7
3844  091b 81            	ret	
3898                     ; 513 void LCD_PutString5x8(u8 x, u8 y, unsigned char *str)
3898                     ; 514 {
3899                     	switch	.text
3900  091c               _LCD_PutString5x8:
3902  091c 89            	pushw	x
3903       00000000      OFST:	set	0
3906  091d 200f          	jra	L7151
3907  091f               L5151:
3908                     ; 517         LCD_PutChar5x8(x++, y, *str++);
3910  091f 5c            	incw	x
3911  0920 1f05          	ldw	(OFST+5,sp),x
3912  0922 88            	push	a
3913  0923 7b03          	ld	a,(OFST+3,sp)
3914  0925 97            	ld	xl,a
3915  0926 7b02          	ld	a,(OFST+2,sp)
3916  0928 0c02          	inc	(OFST+2,sp)
3917  092a 95            	ld	xh,a
3918  092b ada3          	call	_LCD_PutChar5x8
3920  092d 84            	pop	a
3921  092e               L7151:
3922                     ; 515     while(*str)
3924  092e 1e05          	ldw	x,(OFST+5,sp)
3925  0930 f6            	ld	a,(x)
3926  0931 26ec          	jrne	L5151
3927                     ; 519 }
3930  0933 85            	popw	x
3931  0934 81            	ret	
3966                     	xdef	_LCD_ReadCommand
3967                     	xdef	_LCD_ReadData
3968                     	switch	.bss
3969  0000               L12_DisplayBuffer:
3970  0000 000000000000  	ds.b	1536
3971                     	switch	.ubsct
3972  0000               L71_dirty:
3973  0000 00            	ds.b	1
3974                     	xdef	_cAscii5x8Bitmap
3975                     	xref	_delay_us
3976                     	xdef	_LCD_PutChar5x8
3977                     	xdef	_LCD_PutString5x8
3978                     	xdef	_LCD_BufferToLCD
3979                     	xdef	_LCD_BufferDrawYDotLine
3980                     	xdef	_LCD_BufferDrawXDotLine
3981                     	xdef	_LCD_BufferDrawLine
3982                     	xdef	_LCD_BufferDrawPixel
3983                     	xdef	_LCD_WriteData
3984                     	xdef	_LCD_WriteCommand
3985                     	xdef	_LCD_Clear
3986                     	xdef	_LCD_Init
3987                     	xref.b	c_x
4007                     	xref	c_imul
4008                     	end
